!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.dolphin=t():e.dolphin=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=80)}([function(e,t,n){"use strict";var r;function o(e){return void 0!==e&&null!==e}t.c=o,t.a=function(e){r=e},t.b=function(e,t){if(!o(e))throw new Error("The parameter "+t+" is mandatory in "+r)}},function(e,t,n){"use strict";t.b="AttributeMetadataChanged";t.c="CallAction";t.d="ChangeAttributeMetadata";t.f="CreateContext";t.g="CreateController";t.h="CreatePresentationModel";t.i="DeletePresentationModel";t.j="DestroyContext";t.k="DestroyController";t.m="InterruptLongPoll";t.s="PresentationModelDeleted";t.t="StartLongPoll";t.v="ValueChanged";t.l="id";t.a="a_id";t.q="p_id";t.e="c_id";t.r="t";t.n="n";t.u="v";t.o="p";t.p="a"},function(e,t,n){"use strict";var r=n(57),o=n(87);n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return o.a})},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(62)("wks"),o=n(35),i=n(3).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},function(e,t,n){var r=n(3),o=n(7),i=n(8),a=n(9),s="prototype",c=function(e,t,n){var l,d,u,h=e&c.F,f=e&c.G,p=e&c.S,m=e&c.P,b=e&c.B,g=e&c.W,v=f?o:o[t]||(o[t]={}),y=v[s],C=f?r:p?r[t]:(r[t]||{})[s];f&&(n=t);for(l in n)(d=!h&&C&&void 0!==C[l])&&l in v||(u=d?C[l]:n[l],v[l]=f&&"function"!=typeof C[l]?n[l]:b&&d?i(u,r):g&&C[l]==u?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[s]=e[s],t}(u):m&&"function"==typeof u?i(Function.call,u):u,m&&((v.virtual||(v.virtual={}))[l]=u,e&c.R&&y&&!y[l]&&a(y,l,u)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(13);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(10),o=n(59);e.exports=n(12)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(11),o=n(89),i=n(90),a=Object.defineProperty;t.f=n(12)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(6);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(19)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports={}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(8),o=n(102),i=n(103),a=n(11),s=n(33),c=n(104),l={},d={};(t=e.exports=function(e,t,n,u,h){var f,p,m,b,g=h?function(){return e}:c(e),v=r(n,u,t?2:1),y=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(i(g)){for(f=s(e.length);f>y;y++)if((b=t?v(a(p=e[y])[0],p[1]):v(e[y]))===l||b===d)return b}else for(m=g.call(e);!(p=m.next()).done;)if((b=o(m,v,p.value,t))===l||b===d)return b}).BREAK=l,t.RETURN=d},function(e,t,n){"use strict";t.k="string";t.f=0;t.c=1;t.p=2;t.j=3;t.n=4;t.i=5;t.g=6;t.b=7;t.q=8;t.e=9;t.h=10;t.d=11;t.l=55;t.m=52;t.r=54;t.a="ADDED";t.o="REMOVED"},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(10).f,o=n(14),i=n(4)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){"use strict";var r=n(47),o=n(48),i=n(45),a=n(52),s=n(51),c=n(55),l=n(53),d=n(49),u=n(50),h=n(54),f=n(43),p=n(46),m=n(44);t.a=class{static createCreateContextCommand(){return new r.a}static createCreateControllerCommand(e,t){const n=new o.a;return n.init(e,t),n}static createCallActionCommand(e,t,n){const r=new i.a;return r.init(e,t,n),r}static createDestroyControllerCommand(e){const t=new a.a;return t.init(e),t}static createDestroyContextCommand(){return new s.a}static createStartLongPollCommand(){return new c.a}static createInterruptLongPollCommand(){return new l.a}static createCreatePresentationModelCommand(e){const t=new d.a;return t.init(e),t}static createDeletePresentationModelCommand(e){const t=new u.a;return t.init(e),t}static createPresentationModelDeletedCommand(e){let t=new h.a;return t.init(e),t}static createValueChangedCommand(e,t){let n=new f.a;return n.init(e,t),n}static createChangeAttributeMetadataCommand(e,t,n){let r=new p.a;return r.init(e,t,n),r}static createAttributeMetadataChangedCommand(e,t,n){let r=new m.a;return r.init(e,t,n),r}}},function(e,t,n){"use strict";n.d(t,"b",function(){return h}),n.d(t,"c",function(){return f}),n.d(t,"a",function(){return l});var r=n(41),o=n.n(r),i=n(0),a=n(21),s=n(18);const c="@@@ DOLPHIN_BEAN @@@",l="@@@ CONTROLLER_ACTION_CALL_BEAN @@@",d="@@@ HIGHLANDER_BEAN @@@",u="@DP:LS@",h="@@@ SOURCE_SYSTEM @@@",f="client",p="server";t.d=class{constructor(e,t,n,r){Object(i.a)("Connector(url, dolphin, classRepository, config)"),Object(i.b)(e,"url"),Object(i.b)(t,"dolphin"),Object(i.b)(n,"classRepository");let a=this;this.dolphin=t,this.config=r,this.classRepository=n,this.highlanderPMResolver=function(){},this.highlanderPMPromise=new o.a(function(e){a.highlanderPMResolver=e}),t.getClientModelStore().onModelStoreChange(e=>{let t=e.clientPresentationModel,n=t.findAttributeByPropertyName(h);Object(i.c)(n)&&n.value===p&&(e.eventType===s.a?a.onModelAdded(t):e.eventType===s.o&&a.onModelRemoved(t))})}connect(){this.dolphin.startPushListening(a.a.createStartLongPollCommand(),a.a.createInterruptLongPollCommand())}onModelAdded(e){switch(Object(i.a)("Connector.onModelAdded(model)"),Object(i.b)(e,"model"),e.presentationModelType){case l:break;case c:this.classRepository.registerClass(e);break;case d:this.highlanderPMResolver(e);break;case u:this.classRepository.spliceListEntry(e),this.dolphin.deletePresentationModel(e);break;default:this.classRepository.load(e)}}onModelRemoved(e){switch(Object(i.a)("Connector.onModelRemoved(model)"),Object(i.b)(e,"model"),e.presentationModelType){case c:this.classRepository.unregisterClass(e);break;case u:break;default:this.classRepository.unload(e)}}invoke(e){Object(i.a)("Connector.invoke(command)"),Object(i.b)(e,"command");var t=this.dolphin;return new o.a(n=>{t.send(e,{onFinished:()=>{n()}})})}getHighlanderPM(){return this.highlanderPMPromise}}},function(e,t,n){"use strict";var r=n(0),o=n(18),i=n(1),a=n(43),s=n(44),c=n(45),l=n(46),d=n(47),u=n(48),h=n(49),f=n(50),p=n(51),m=n(52),b=n(53),g=n(54),v=n(55),y=n(86);t.a=class{static _encodeAttributeMetadataChangedCommand(e){Object(r.a)("Codec.encodeAttributeMetadataChangedCommand"),Object(r.b)(e,"command"),Object(r.b)(e.attributeId,"command.attributeId"),Object(r.b)(e.metadataName,"command.metadataName");let t={};return t[i.l]=i.b,t[i.a]=e.attributeId,t[i.n]=e.metadataName,t[i.u]=e.value,t}static _decodeAttributeMetadataChangedCommand(e){Object(r.a)("Codec.decodeAttributeMetadataChangedCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[i.a],"jsonCommand[ATTRIBUTE_ID]"),Object(r.b)(e[i.n],"jsonCommand[NAME]");let t=new s.a;return t.attributeId=e[i.a],t.metadataName=e[i.n],t.value=e[i.u],t}static _encodeCallActionCommand(e){Object(r.a)("Codec.encodeCallActionCommand"),Object(r.b)(e,"command"),Object(r.b)(e.controllerid,"command.controllerid"),Object(r.b)(e.actionName,"command.actionName"),Object(r.b)(e.params,"command.params");let t={};return t[i.l]=i.c,t[i.e]=e.controllerid,t[i.n]=e.actionName,t[i.o]=e.params.map(e=>{let t={};return t[i.n]=e.name,Object(r.c)(e.value)&&(t[i.u]=e.value),t}),t}static _decodeCallActionCommand(e){Object(r.a)("Codec.decodeCallActionCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[i.e],"jsonCommand[CONTROLLER_ID]"),Object(r.b)(e[i.n],"jsonCommand[NAME]"),Object(r.b)(e[i.o],"jsonCommand[PARAMS]");let t=new c.a;return t.controllerid=e[i.e],t.actionName=e[i.n],t.params=e[i.o].map(e=>({name:e[i.n],value:Object(r.c)(e[i.u])?e[i.u]:null})),t}static _encodeChangeAttributeMetadataCommand(e){Object(r.a)("Codec.encodeChangeAttributeMetadataCommand"),Object(r.b)(e,"command"),Object(r.b)(e.attributeId,"command.attributeId"),Object(r.b)(e.metadataName,"command.metadataName");let t={};return t[i.l]=i.d,t[i.a]=e.attributeId,t[i.n]=e.metadataName,t[i.u]=e.value,t}static _decodeChangeAttributeMetadataCommand(e){Object(r.a)("Codec.decodeChangeAttributeMetadataCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[i.a],"jsonCommand[ATTRIBUTE_ID]"),Object(r.b)(e[i.n],"jsonCommand[NAME]");let t=new l.a;return t.attributeId=e[i.a],t.metadataName=e[i.n],t.value=e[i.u],t}static _encodeCreateContextCommand(e){Object(r.a)("Codec.encodeCreateContextCommand"),Object(r.b)(e,"command");let t={};return t[i.l]=i.f,t}static _decodeCreateContextCommand(e){return Object(r.a)("Codec.decodeCreateContextCommand"),Object(r.b)(e,"jsonCommand"),new d.a}static _encodeCreateControllerCommand(e){Object(r.a)("Codec._encodeCreateControllerCommand"),Object(r.b)(e,"command"),Object(r.b)(e.controllerName,"command.controllerName");let t={};return t[i.l]=i.g,t[i.n]=e.controllerName,t[i.e]=e.parentControllerId,t}static _decodeCreateControllerCommand(e){Object(r.a)("Codec._decodeCreateControllerCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[i.n],"jsonCommand[NAME]"),Object(r.b)(e[i.e],"jsonCommand[CONTROLLER_ID]");let t=new u.a;return t.controllerName=e[i.n],t.parentControllerId=e[i.e],t}static _encodeCreatePresentationModelCommand(e){Object(r.a)("Codec.encodeCreatePresentationModelCommand"),Object(r.b)(e,"command"),Object(r.b)(e.pmId,"command.pmId"),Object(r.b)(e.pmType,"command.pmType");let t={};return t[i.l]=i.h,t[i.q]=e.pmId,t[i.r]=e.pmType,t[i.p]=e.attributes.map(e=>{let t={};return t[i.n]=e.propertyName,t[i.a]=e.id,Object(r.c)(e.value)&&(t[i.u]=e.value),t}),t}static _decodeCreatePresentationModelCommand(e){Object(r.a)("Codec.decodeCreatePresentationModelCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[i.q],"jsonCommand[PM_ID]"),Object(r.b)(e[i.r],"jsonCommand[PM_TYPE]");let t=new h.a;return t.pmId=e[i.q],t.pmType=e[i.r],t.attributes=e[i.p].map(e=>({propertyName:e[i.n],id:e[i.a],value:Object(r.c)(e[i.u])?e[i.u]:null})),t}static _encodeDeletePresentationModelCommand(e){Object(r.a)("Codec._encodeDeletePresentationModelCommand"),Object(r.b)(e,"command"),Object(r.b)(e.pmId,"command.pmId");let t={};return t[i.l]=i.i,t[i.q]=e.pmId,t}static _decodeDeletePresentationModelCommand(e){Object(r.a)("Codec._decodeDeletePresentationModelCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[i.q],"jsonCommand[PM_ID]");let t=new f.a;return t.pmId=e[i.q],t}static _encodeDestroyContextCommand(e){Object(r.a)("Codec._encodeDestroyContextCommand"),Object(r.b)(e,"command");let t={};return t[i.l]=i.j,t}static _decodeDestroyContextCommand(e){return Object(r.a)("Codec._decodeDestroyContextCommand"),Object(r.b)(e,"jsonCommand"),new p.a}static _encodeDestroyControllerCommand(e){Object(r.a)("Codec._encodeDestroyControllerCommand"),Object(r.b)(e,"command"),Object(r.b)(e.controllerId,"command.controllerId");let t={};return t[i.l]=i.k,t[i.e]=e.controllerId,t}static _decodeDestroyControllerCommand(e){Object(r.a)("Codec._decodeDestroyControllerCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[i.e],"jsonCommand[CONTROLLER_ID]");let t=new m.a;return t.controllerId=e[i.e],t}static _encodeInterruptLongPollCommand(e){Object(r.a)("Codec._encodeInterruptLongPollCommand"),Object(r.b)(e,"command");let t={};return t[i.l]=i.m,t}static _decodeInterruptLongPollCommand(e){return Object(r.a)("Codec._decodeInterruptLongPollCommand"),Object(r.b)(e,"jsonCommand"),new b.a}static _encodePresentationModelDeletedCommand(e){Object(r.a)("Codec._encodePresentationModelDeletedCommand"),Object(r.b)(e,"command"),Object(r.b)(e.pmId,"command.pmId");let t={};return t[i.l]=i.s,t[i.q]=e.pmId,t}static _decodePresentationModelDeletedCommand(e){Object(r.a)("Codec._decodePresentationModelDeletedCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[i.q],"jsonCommand[PM_ID]");let t=new g.a;return t.pmId=e[i.q],t}static _encodeStartLongPollCommand(e){Object(r.a)("Codec._encodeStartLongPollCommand"),Object(r.b)(e,"command");let t={};return t[i.l]=i.t,t}static _decodeStartLongPollCommand(e){return Object(r.a)("Codec._decodeStartLongPollCommand"),Object(r.b)(e,"jsonCommand"),new v.a}static _encodeValueChangedCommand(e){Object(r.a)("Codec.encodeValueChangedCommand"),Object(r.b)(e,"command"),Object(r.b)(e.attributeId,"command.attributeId");let t={};return t[i.l]=i.v,t[i.a]=e.attributeId,Object(r.c)(e.newValue)&&(t[i.u]=e.newValue),t}static _decodeValueChangedCommand(e){Object(r.a)("Codec.decodeValueChangedCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[i.a],"jsonCommand[ATTRIBUTE_ID]");let t=new a.a;return t.attributeId=e[i.a],Object(r.c)(e[i.u])?t.newValue=e[i.u]:t.newValue=null,t}static encode(e){Object(r.a)("Codec.encode"),Object(r.b)(e,"commands");let t=this;return JSON.stringify(e.map(e=>{if(e.id===i.b)return t._encodeAttributeMetadataChangedCommand(e);if(e.id===i.c)return t._encodeCallActionCommand(e);if(e.id===i.d)return t._encodeChangeAttributeMetadataCommand(e);if(e.id===i.f)return t._encodeCreateContextCommand(e);if(e.id===i.g)return t._encodeCreateControllerCommand(e);if(e.id===i.h)return t._encodeCreatePresentationModelCommand(e);if(e.id===i.i)return t._encodeDeletePresentationModelCommand(e);if(e.id===i.j)return t._encodeDestroyContextCommand(e);if(e.id===i.k)return t._encodeDestroyControllerCommand(e);if(e.id===i.m)return t._encodeInterruptLongPollCommand(e);if(e.id===i.s)return t._encodePresentationModelDeletedCommand(e);if(e.id===i.t)return t._encodeStartLongPollCommand(e);if(e.id===i.v)return t._encodeValueChangedCommand(e);throw new y.a("Command of type "+e.id+" can not be handled")}))}static decode(e){if(Object(r.a)("Codec.decode"),Object(r.b)(e,"transmitted"),typeof e===o.k){let t=this;return JSON.parse(e).map(function(e){if(e.id===i.b)return t._decodeAttributeMetadataChangedCommand(e);if(e.id===i.c)return t._decodeCallActionCommand(e);if(e.id===i.d)return t._decodeChangeAttributeMetadataCommand(e);if(e.id===i.f)return t._decodeCreateContextCommand(e);if(e.id===i.g)return t._decodeCreateControllerCommand(e);if(e.id===i.h)return t._decodeCreatePresentationModelCommand(e);if(e.id===i.i)return t._decodeDeletePresentationModelCommand(e);if(e.id===i.j)return t._decodeDestroyContextCommand(e);if(e.id===i.k)return t._decodeDestroyControllerCommand(e);if(e.id===i.m)return t._decodeInterruptLongPollCommand(e);if(e.id===i.s)return t._decodePresentationModelDeletedCommand(e);if(e.id===i.t)return t._decodeStartLongPollCommand(e);if(e.id===i.v)return t._decodeValueChangedCommand(e);throw new y.a("Command of type "+e.id+" can not be handled")})}throw new y.a("Can not decode data that is not of type string")}}},function(e,t,n){"use strict";t.a=class{constructor(){this.eventHandlers=[]}onEvent(e){this.eventHandlers.push(e)}trigger(e){this.eventHandlers.forEach(t=>t(e))}}},function(e,t,n){n(26),n(27),n(36),n(101),n(109),n(111),n(112),e.exports=n(7).Map},function(e,t){},function(e,t,n){"use strict";var r=n(88)(!0);n(30)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";var r=n(58),o=n(5),i=n(91),a=n(9),s=n(14),c=n(15),l=n(92),d=n(20),u=n(98),h=n(4)("iterator"),f=!([].keys&&"next"in[].keys()),p="values",m=function(){return this};e.exports=function(e,t,n,b,g,v,y){l(n,t,b);var C,O,j,w=function(e){if(!f&&e in P)return P[e];switch(e){case"keys":case p:return function(){return new n(this,e)}}return function(){return new n(this,e)}},M=t+" Iterator",_=g==p,E=!1,P=e.prototype,A=P[h]||P["@@iterator"]||g&&P[g],L=!f&&A||w(g),R=g?_?w("entries"):L:void 0,x="Array"==t&&P.entries||A;if(x&&(j=u(x.call(new e)))!==Object.prototype&&j.next&&(d(j,M,!0),r||s(j,h)||a(j,h,m)),_&&A&&A.name!==p&&(E=!0,L=function(){return A.call(this)}),r&&!y||!f&&!E&&P[h]||a(P,h,L),c[t]=L,c[M]=m,g)if(C={values:_?L:w(p),keys:v?L:w("keys"),entries:R},y)for(O in C)O in P||i(P,O,C[O]);else o(o.P+o.F*(f||E),t,C);return C}},function(e,t,n){var r=n(6),o=n(3).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(61),o=n(29);e.exports=function(e){return r(o(e))}},function(e,t,n){var r=n(28),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(62)("keys"),o=n(35);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){n(99);for(var r=n(3),o=n(9),i=n(15),a=n(4)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<s.length;c++){var l=s[c],d=r[l],u=d&&d.prototype;u&&!u[a]&&o(u,a,l),i[l]=i.Array}},function(e,t,n){var r=n(9);e.exports=function(e,t,n){for(var o in t)n&&e[o]?e[o]=t[o]:r(e,o,t[o]);return e}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(16),o=n(4)("toStringTag"),i="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:i?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var r=n(6);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){n(26),n(27),n(36),n(120),n(124),n(125),e.exports=n(7).Promise},function(e,t,n){"use strict";var r=n(13);e.exports.f=function(e){return new function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=r(t),this.reject=r(n)}(e)}},function(e,t,n){"use strict";var r=n(1),o=n(0);t.a=class{constructor(){this.id=r.v}init(e,t){Object(o.a)("ValueChangedCommand.init()"),Object(o.b)(e,"attributeId"),this.attributeId=e,this.newValue=t}}},function(e,t,n){"use strict";var r=n(1),o=n(0);t.a=class{constructor(){this.id=r.b}init(e,t,n){Object(o.a)("AttributeMetadataChangedCommand.init()"),Object(o.b)(e,"attributeId"),Object(o.b)(t,"metadataName"),this.attributeId=e,this.metadataName=t,this.value=n}}},function(e,t,n){"use strict";var r=n(1),o=n(0);t.a=class{constructor(){this.id=r.c}init(e,t,n){Object(o.a)("CreateControllerCommand.init()"),Object(o.b)(e,"controllerid"),Object(o.b)(t,"actionName"),this.controllerid=e,this.actionName=t,this.params=n}}},function(e,t,n){"use strict";var r=n(1),o=n(0);t.a=class{constructor(){this.id=r.d}init(e,t,n){Object(o.a)("ChangeAttributeMetadataCommand.init()"),Object(o.b)(e,"attributeId"),Object(o.b)(t,"metadataName"),this.attributeId=e,this.metadataName=t,this.value=n}}},function(e,t,n){"use strict";var r=n(1);t.a=class{constructor(){this.id=r.f}}},function(e,t,n){"use strict";var r=n(1),o=n(0);t.a=class{constructor(){this.id=r.g}init(e,t){Object(o.a)("CreateControllerCommand.init()"),Object(o.b)(e,"controllerName"),this.controllerName=e,this.parentControllerId=t}}},function(e,t,n){"use strict";var r=n(1),o=n(0);t.a=class{constructor(){this.id=r.h}init(e){Object(o.a)("CreatePresentationModelCommand.init()"),Object(o.b)(e,"presentationModel"),this.attributes=[],this.clientSideOnly=!1,this.pmId=e.id,this.pmType=e.presentationModelType;var t=this;e.getAttributes().forEach(function(e){t.attributes.push({propertyName:e.propertyName,id:e.id,value:e.getValue()})})}}},function(e,t,n){"use strict";var r=n(1),o=n(0);t.a=class{constructor(){this.id=r.i}init(e){Object(o.a)("DeletePresentationModelCommand.init()"),Object(o.b)(e,"pmId"),this.pmId=e}}},function(e,t,n){"use strict";var r=n(1);t.a=class{constructor(){this.id=r.j}}},function(e,t,n){"use strict";var r=n(1),o=n(0);t.a=class{constructor(){this.id=r.k}init(e){Object(o.a)("DestroyControllerCommand.init()"),Object(o.b)(e,"controllerId"),this.controllerId=e}}},function(e,t,n){"use strict";var r=n(1);t.a=class{constructor(){this.id=r.m}}},function(e,t,n){"use strict";var r=n(1),o=n(0);t.a=class{constructor(){this.id=r.s}init(e){Object(o.a)("PresentationModelDeletedCommand.init()"),Object(o.b)(e,"pmId"),this.pmId=e}}},function(e,t,n){"use strict";var r=n(1);t.a=class{constructor(){this.id=r.t}}},function(e,t,n){"use strict";var r=n(24),o=0;class i{constructor(e,t){this.id=e,this.presentationModelType=t,this.attributes=[],this.clientSideOnly=!1,this.dirty=!1,this.id=void 0!==e&&null!=e?e:(o++).toString(),this.invalidBus=new r.a,this.dirtyValueChangeBus=new r.a}copy(){var e=new i(null,this.presentationModelType);return e.clientSideOnly=!0,this.getAttributes().forEach(t=>{var n=t.copy();e.addAttribute(n)}),e}addAttributes(e){!e||e.length<1||e.forEach(e=>{this.addAttribute(e)})}addAttribute(e){if(e&&!(this.attributes.indexOf(e)>-1)){if(this.findAttributeByPropertyName(e.propertyName))throw new Error("There already is an attribute with property name: "+e.propertyName+" in presentation model with id: "+this.id);if(e.getQualifier()&&this.findAttributeByQualifier(e.getQualifier()))throw new Error("There already is an attribute with qualifier: "+e.getQualifier()+" in presentation model with id: "+this.id);e.setPresentationModel(this),this.attributes.push(e),e.onValueChange(()=>{this.invalidBus.trigger({source:this})})}}onInvalidated(e){this.invalidBus.onEvent(e)}getAttributes(){return this.attributes.slice(0)}getAt(e){return this.findAttributeByPropertyName(e)}findAllAttributesByPropertyName(e){var t=[];return e?(this.attributes.forEach(n=>{n.propertyName==e&&t.push(n)}),t):null}findAttributeByPropertyName(e){if(!e)return null;for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].propertyName==e)return this.attributes[t];return null}findAttributeByQualifier(e){if(!e)return null;for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].getQualifier()==e)return this.attributes[t];return null}findAttributeById(e){if(!e)return null;for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].id==e)return this.attributes[t];return null}syncWith(e){this.attributes.forEach(t=>{var n=e.getAt(t.propertyName);n&&t.syncWith(n)})}}t.a=i},function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r={NONE:{name:"NONE",text:"[NONE ]",level:0},ALL:{name:"ALL",text:"[ALL  ]",level:100},TRACE:{name:"TRACE",text:"[TRACE]",level:5},DEBUG:{name:"DEBUG",text:"[DEBUG]",level:4},INFO:{name:"INFO",text:"[INFO ]",level:3},WARN:{name:"WARN",text:"[WARN ]",level:2},ERROR:{name:"ERROR",text:"[ERROR]",level:1}}},function(e,t){e.exports=!0},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(11),o=n(93),i=n(63),a=n(34)("IE_PROTO"),s=function(){},c="prototype",l=function(){var e,t=n(31)("iframe"),r=i.length;for(t.style.display="none",n(64).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l[c][i[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[c]=r(e),n=new s,s[c]=null,n[a]=e):n=l(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(16);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(3),o="__core-js_shared__",i=r[o]||(r[o]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(3).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(29);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(10).f,o=n(60),i=n(37),a=n(8),s=n(38),c=n(17),l=n(30),d=n(66),u=n(68),h=n(12),f=n(69).fastKey,p=n(40),m=h?"_s":"size",b=function(e,t){var n,r=f(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,l){var d=e(function(e,r){s(e,d,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=r&&c(r,n,e[l],e)});return i(d.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=p(this,t),r=b(n,e);if(r){var o=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=o),o&&(o.p=i),n._f==r&&(n._f=o),n._l==r&&(n._l=i),n[m]--}return!!r},forEach:function(e){p(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!b(p(this,t),e)}}),h&&r(d.prototype,"size",{get:function(){return p(this,t)[m]}}),d},def:function(e,t,n){var r,o,i=b(e,t);return i?i.v=n:(e._l=i={i:o=f(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=i),r&&(r.n=i),e[m]++,"F"!==o&&(e._i[o]=i)),e},getEntry:b,setStrong:function(e,t,n){l(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?d(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,d(1))},n?"entries":"values",!n,!0),u(t)}}},function(e,t,n){"use strict";var r=n(3),o=n(7),i=n(10),a=n(12),s=n(4)("species");e.exports=function(e){var t="function"==typeof o[e]?o[e]:r[e];a&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(35)("meta"),o=n(6),i=n(14),a=n(10).f,s=0,c=Object.isExtensible||function(){return!0},l=!n(19)(function(){return c(Object.preventExtensions({}))}),d=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},u=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!c(e))return"F";if(!t)return"E";d(e)}return e[r].i},getWeak:function(e,t){if(!i(e,r)){if(!c(e))return!0;if(!t)return!1;d(e)}return e[r].w},onFreeze:function(e){return l&&u.NEED&&c(e)&&!i(e,r)&&d(e),e}}},function(e,t,n){"use strict";var r=n(3),o=n(5),i=n(69),a=n(19),s=n(9),c=n(37),l=n(17),d=n(38),u=n(6),h=n(20),f=n(10).f,p=n(105)(0),m=n(12);e.exports=function(e,t,n,b,g,v){var y=r[e],C=y,O=g?"set":"add",j=C&&C.prototype,w={};return m&&"function"==typeof C&&(v||j.forEach&&!a(function(){(new C).entries().next()}))?(C=t(function(t,n){d(t,C,e,"_c"),t._c=new y,void 0!=n&&l(n,g,t[O],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in j&&(!v||"clear"!=e)&&s(C.prototype,e,function(n,r){if(d(this,C,e),!t&&v&&!u(n))return"get"==e&&void 0;var o=this._c[e](0===n?0:n,r);return t?this:o})}),v||f(C.prototype,"size",{get:function(){return this._c.size}})):(C=b.getConstructor(t,e,g,O),c(C.prototype,n),i.NEED=!0),h(C,e),w[e]=C,o(o.G+o.W+o.F,w),v||b.setStrong(C,e,g),C}},function(e,t,n){var r=n(39),o=n(110);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return o(this)}}},function(e,t,n){"use strict";var r=n(5);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){"use strict";var r=n(5),o=n(13),i=n(8),a=n(17);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,c=arguments[1];return o(this),(t=void 0!==c)&&o(c),void 0==e?new this:(n=[],t?(r=0,s=i(c,arguments[2],2),a(e,!1,function(e){n.push(s(e,r++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){var r=n(11),o=n(13),i=n(4)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[i])?t:o(n)}},function(e,t,n){var r,o,i,a=n(8),s=n(121),c=n(64),l=n(31),d=n(3),u=d.process,h=d.setImmediate,f=d.clearImmediate,p=d.MessageChannel,m=d.Dispatch,b=0,g={},v="onreadystatechange",y=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},C=function(e){y.call(e.data)};h&&f||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++b]=function(){s("function"==typeof e?e:Function(e),t)},r(b),b},f=function(e){delete g[e]},"process"==n(16)(u)?r=function(e){u.nextTick(a(y,e,1))}:m&&m.now?r=function(e){m.now(a(y,e,1))}:p?(i=(o=new p).port2,o.port1.onmessage=C,r=a(i.postMessage,i,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(r=function(e){d.postMessage(e+"","*")},d.addEventListener("message",C,!1)):r=v in l("script")?function(e){c.appendChild(l("script"))[v]=function(){c.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:h,clear:f}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(11),o=n(6),i=n(42);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){n(26),n(27),n(36),n(129),n(130),n(131),n(132),e.exports=n(7).Set},function(e,t){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){var n=this;function r(){n.off(e,r),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(81),o=n(2);n.d(t,"createClientContext",function(){return r.b}),n.d(t,"ClientContextFactory",function(){return r.a}),n.d(t,"LoggerFactory",function(){return o.b}),n.d(t,"LogLevel",function(){return o.a})},function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"a",function(){return h});var r=n(82),o=n(0),i=n(2),a=n(22),s=n(126),c=n(127),l=n(128),d=n(134),u=n(135);class h{create(e,t){Object(o.a)("connect(url, config)"),Object(o.b)(e,"url"),h.LOGGER.info("Dolphin Platform Version:","0.18.0"),h.LOGGER.debug("Creating client context",e,t);let n=Object(r.a)().url(e).reset(!1).slackMS(4).supportCORS(!0).maxBatchSize(Number.MAX_SAFE_INTEGER);Object(o.c)(t)&&(Object(o.c)(t.errorHandler)&&n.errorHandler(t.errorHandler),Object(o.c)(t.headersInfo)&&Object.keys(t.headersInfo).length>0&&n.headersInfo(t.headersInfo));let i=n.build(),f=new u.a(e,t);f.on("error",function(e){v.emit("error",e)}),i.clientConnector.transmitter=f;let p=new c.a(i),m=new s.a(p),b=new a.d(e,i,p,t),g=new l.a(i,p,b),v=new d.a(i,m,g,b);return h.LOGGER.debug("clientContext created with",v),v}}h.LOGGER=i.b.getLogger("ClientContextFactory");let f=(new h).create},function(e,t,n){"use strict";t.a=o;var r=n(83);function o(){return new r.a}},function(e,t,n){"use strict";var r=n(84),o=n(114),i=n(116),a=n(118),s=n(119),c=n(2);class l{constructor(){this.reset_=!1,this.slackMS_=300,this.maxBatchSize_=50,this.supportCORS_=!1}url(e){return this.url_=e,this}reset(e){return this.reset_=e,this}slackMS(e){return this.slackMS_=e,this}maxBatchSize(e){return this.maxBatchSize_=e,this}supportCORS(e){return this.supportCORS_=e,this}errorHandler(e){return this.errorHandler_=e,this}headersInfo(e){return this.headersInfo_=e,this}build(){let e,t=new o.a;return e=null!=this.url_&&this.url_.length>0?new a.a(this.url_,this.reset_,"UTF-8",this.errorHandler_,this.supportCORS_,this.headersInfo_):new s.a,t.setClientConnector(new r.a(e,t,this.slackMS_,this.maxBatchSize_)),t.setClientModelStore(new i.a(t)),l.LOGGER.debug("ClientDolphin initialized",t,e),t}}t.a=l,l.LOGGER=c.b.getLogger("DolphinBuilder")},function(e,t,n){"use strict";var r=n(85),o=n(23),i=n(56),a=n(2);class s{constructor(e,t,n=0,i=50){this.commandQueue=[],this.currentlySending=!1,this.pushEnabled=!1,this.waiting=!1,this.transmitter=e,this.clientDolphin=t,this.slackMS=n,this.codec=new o.a,this.commandBatcher=new r.a(!0,i)}setCommandBatcher(e){this.commandBatcher=e}setPushEnabled(e){this.pushEnabled=e}setPushListener(e){this.pushListener=e}setReleaseCommand(e){this.releaseCommand=e}send(e,t){this.commandQueue.push({command:e,handler:t}),this.currentlySending?this.release():this.doSendNext()}doSendNext(){if(this.commandQueue.length<1){if(!this.pushEnabled)return void(this.currentlySending=!1);this.enqueuePushCommand()}this.currentlySending=!0;let e=this.commandBatcher.batch(this.commandQueue);if(e.length>0){let t=e[e.length-1].handler,n=e.map(e=>e.command);this.transmitter.transmit(n,e=>{let n=[];e.forEach(e=>{let t=this.handle(e);t&&n.push(t)}),t&&t.onFinished(n),setTimeout(()=>this.doSendNext(),this.slackMS)})}else setTimeout(()=>this.doSendNext(),this.slackMS)}handle(e){return"DeletePresentationModel"===e.id?this.handleDeletePresentationModelCommand(e):"CreatePresentationModel"===e.id?this.handleCreatePresentationModelCommand(e):"ValueChanged"===e.id?this.handleValueChangedCommand(e):"AttributeMetadataChanged"===e.id?this.handleAttributeMetadataChangedCommand(e):(s.LOGGER.error("Cannot handle, unknown command "+e),null)}handleDeletePresentationModelCommand(e){let t=this.clientDolphin.findPresentationModelById(e.pmId);return t?(this.clientDolphin.getClientModelStore().deletePresentationModel(t,!0),t):null}handleCreatePresentationModelCommand(e){if(this.clientDolphin.getClientModelStore().containsPresentationModel(e.pmId))throw new Error("There already is a presentation model with id "+e.pmId+"  known to the client.");let t=[];e.attributes.forEach(e=>{let n=this.clientDolphin.attribute(e.propertyName,e.qualifier,e.value);e.id&&e.id.match(".*S$")&&(n.id=e.id),t.push(n)});let n=new i.a(e.pmId,e.pmType);return n.addAttributes(t),e.clientSideOnly&&(n.clientSideOnly=!0),this.clientDolphin.getClientModelStore().add(n,!1),this.clientDolphin.updatePresentationModelQualifier(n),n}handleValueChangedCommand(e){let t=this.clientDolphin.getClientModelStore().findAttributeById(e.attributeId);return t?t.getValue()===e.newValue?null:(t.setValueFromServer(e.newValue),null):(s.LOGGER.error("attribute with id "+e.attributeId+" not found, cannot update to new value "+e.newValue),null)}handleAttributeMetadataChangedCommand(e){let t=this.clientDolphin.getClientModelStore().findAttributeById(e.attributeId);return t?(t[e.metadataName]=e.value,null):null}listen(){this.pushEnabled&&(this.waiting||this.currentlySending||this.doSendNext())}enqueuePushCommand(){let e=this;this.waiting=!0,this.commandQueue.push({command:this.pushListener,handler:{onFinished:function(){e.waiting=!1},onFinishedData:null}})}release(){this.waiting&&(this.waiting=!1,this.transmitter.signal(this.releaseCommand))}}t.a=s,s.LOGGER=a.b.getLogger("ClientConnector")},function(e,t,n){"use strict";var r=n(1);t.a=class{constructor(e=!0,t=50){this.folding=e,this.maxBatchSize=t}batch(e){let t=[],n=0;for(;e[n]&&n<=this.maxBatchSize;){const o=e[n];if(n++,this.folding?o.command.id==r.v&&t.length>0&&t[t.length-1].command.id==r.v&&o.command.attributeId==t[t.length-1].command.attributeId?t[t.length-1].command.newValue=o.command.newValue:o.command.id==r.s||t.push(o):t.push(o),o.handler)break}return e.splice(0,n),t}}},function(e,t,n){"use strict";t.a=class extends Error{constructor(e){super(e)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(25),o=n.n(r),i=n(0),a=n(113);const s=new a.a("ROOT"),c={loggers:new o.a};class l{static getLogger(e){if(!Object(i.c)(e)||"ROOT"===e)return s;const t=c.loggers.get(e);if(t)return t;const n=new a.a(e,s);return c.loggers.set(e,n),n}}},function(e,t,n){var r=n(28),o=n(29);e.exports=function(e){return function(t,n){var i,a,s=String(o(t)),c=r(n),l=s.length;return c<0||c>=l?e?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===l||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}}},function(e,t,n){e.exports=!n(12)&&!n(19)(function(){return 7!=Object.defineProperty(n(31)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(6);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){e.exports=n(9)},function(e,t,n){"use strict";var r=n(60),o=n(59),i=n(20),a={};n(9)(a,n(4)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t,n){var r=n(10),o=n(11),i=n(94);e.exports=n(12)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),s=a.length,c=0;s>c;)r.f(e,n=a[c++],t[n]);return e}},function(e,t,n){var r=n(95),o=n(63);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(14),o=n(32),i=n(96)(!1),a=n(34)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),c=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~i(l,n)||l.push(n));return l}},function(e,t,n){var r=n(32),o=n(33),i=n(97);e.exports=function(e){return function(t,n,a){var s,c=r(t),l=o(c.length),d=i(a,l);if(e&&n!=n){for(;l>d;)if((s=c[d++])!=s)return!0}else for(;l>d;d++)if((e||d in c)&&c[d]===n)return e||d||0;return!e&&-1}}},function(e,t,n){var r=n(28),o=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(14),o=n(65),i=n(34)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){"use strict";var r=n(100),o=n(66),i=n(15),a=n(32);e.exports=n(30)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t,n){"use strict";var r=n(67),o=n(40);e.exports=n(70)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(o(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(o(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){var r=n(11);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},function(e,t,n){var r=n(15),o=n(4)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},function(e,t,n){var r=n(39),o=n(4)("iterator"),i=n(15);e.exports=n(7).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){var r=n(8),o=n(61),i=n(65),a=n(33),s=n(106);e.exports=function(e,t){var n=1==e,c=2==e,l=3==e,d=4==e,u=6==e,h=5==e||u,f=t||s;return function(t,s,p){for(var m,b,g=i(t),v=o(g),y=r(s,p,3),C=a(v.length),O=0,j=n?f(t,C):c?f(t,0):void 0;C>O;O++)if((h||O in v)&&(b=y(m=v[O],O,g),e))if(n)j[O]=b;else if(b)switch(e){case 3:return!0;case 5:return m;case 6:return O;case 2:j.push(m)}else if(d)return!1;return u?-1:l||d?d:j}}},function(e,t,n){var r=n(107);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(6),o=n(108),i=n(4)("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(16);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(5);r(r.P+r.R,"Map",{toJSON:n(71)("Map")})},function(e,t,n){var r=n(17);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){n(72)("Map")},function(e,t,n){n(73)("Map")},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=n(57);const i={pad(e,t){let n=""+e;for(;n.length<t;)n="0"+n;return n},internalLog(){const e=Array.from(arguments),t=e.shift(),n=e.shift(),r=e.shift(),o=new Date;t(o.getFullYear()+"-"+i.pad(o.getMonth()+1,2)+"-"+i.pad(o.getDate(),2)+" "+i.pad(o.getHours(),2)+":"+i.pad(o.getMinutes(),2)+":"+i.pad(o.getSeconds(),2)+"."+i.pad(o.getMilliseconds(),3),r.text,n,...e)},getCookie(e){if(Object(r.c)(window)&&Object(r.c)(window.document)&&Object(r.c)(window.document.cookie)){const t=("; "+document.cookie).split("; "+e+"=");if(2===t.length)return t.pop().split(";").shift()}}};class a{constructor(e,t){switch(this.context=e,this.rootLogger=t,i.getCookie("DOLPHIN_PLATFORM_LOGGER_"+this.context)){case"NONE":this.logLevel=o.a.NONE;break;case"ALL":this.logLevel=o.a.ALL;break;case"TRACE":this.logLevel=o.a.TRACE;break;case"DEBUG":this.logLevel=o.a.DEBUG;break;case"INFO":this.logLevel=o.a.INFO;break;case"WARN":this.logLevel=o.a.WARN;break;case"ERROR":this.logLevel=o.a.ERROR}}trace(){Object(r.c)(console)&&this.isLogLevel(o.a.TRACE)&&i.internalLog(console.log,this.context,o.a.TRACE,...arguments)}debug(){Object(r.c)(console)&&this.isLogLevel(o.a.DEBUG)&&i.internalLog(console.log,this.context,o.a.DEBUG,...arguments)}info(){Object(r.c)(console)&&this.isLogLevel(o.a.INFO)&&i.internalLog(console.log,this.context,o.a.INFO,...arguments)}warn(){Object(r.c)(console)&&this.isLogLevel(o.a.WARN)&&i.internalLog(console.warn,this.context,o.a.WARN,...arguments)}error(){Object(r.c)(console)&&this.isLogLevel(o.a.ERROR)&&i.internalLog(console.error,this.context,o.a.ERROR,...arguments)}getLogLevel(){return Object(r.c)(this.logLevel)?this.logLevel:Object(r.c)(this.rootLogger)?this.rootLogger.getLogLevel():o.a.INFO}setLogLevel(e){this.logLevel=e}setLogLevelByName(e){Object(r.c)(o.a[e])&&(this.logLevel=o.a[e])}isLogLevel(e){return this.getLogLevel()!==o.a.NONE&&(this.getLogLevel()===o.a.ALL||(this.getLogLevel()===o.a.TRACE||(this.getLogLevel()===o.a.DEBUG&&e!==o.a.TRACE||(this.getLogLevel()===o.a.INFO&&e!==o.a.TRACE&&e!==o.a.DEBUG||(this.getLogLevel()===o.a.WARN&&e!==o.a.TRACE&&e!==o.a.DEBUG&&e!==o.a.INFO||this.getLogLevel()===o.a.ERROR&&e!==o.a.TRACE&&e!==o.a.DEBUG&&e!==o.a.INFO&&e!==o.a.WARN)))))}isLogLevelUseable(e){return Object(r.b)(e,"level"),!!e.level&&this.getLogLevel().level>=e.level}}},function(e,t,n){"use strict";var r=n(115),o=n(56);t.a=class{constructor(){}setClientConnector(e){this.clientConnector=e}getClientConnector(){return this.clientConnector}send(e,t){this.clientConnector.send(e,t)}attribute(e,t,n){return new r.a(e,t,n)}presentationModel(e,t,...n){var r=new o.a(e,t);return n&&n.length>0&&n.forEach(e=>{r.addAttribute(e)}),this.getClientModelStore().add(r,!0),r}setClientModelStore(e){this.clientModelStore=e}getClientModelStore(){return this.clientModelStore}listPresentationModelIds(){return this.getClientModelStore().listPresentationModelIds()}listPresentationModels(){return this.getClientModelStore().listPresentationModels()}findAllPresentationModelByType(e){return this.getClientModelStore().findAllPresentationModelByType(e)}getAt(e){return this.findPresentationModelById(e)}findPresentationModelById(e){return this.getClientModelStore().findPresentationModelById(e)}deletePresentationModel(e){this.getClientModelStore().deletePresentationModel(e,!0)}updatePresentationModelQualifier(e){e.getAttributes().forEach(e=>{this.updateAttributeQualifier(e)})}updateAttributeQualifier(e){e.getQualifier()&&this.getClientModelStore().findAllAttributesByQualifier(e.getQualifier()).forEach(t=>{t.setValue(e.getValue())})}startPushListening(e,t){this.clientConnector.setPushListener(e),this.clientConnector.setReleaseCommand(t),this.clientConnector.setPushEnabled(!0),setTimeout(()=>{this.clientConnector.listen()},0)}stopPushListening(){this.clientConnector.setPushEnabled(!1)}}},function(e,t,n){"use strict";var r=n(24),o=n(2);class i{constructor(e,t,n){this.propertyName=e,this.id=i.clientAttributeInstanceCount+++"C",this.valueChangeBus=new r.a,this.qualifierChangeBus=new r.a,this.setValue(n),this.setQualifier(t)}copy(){return new i(this.propertyName,this.getQualifier(),this.getValue())}setPresentationModel(e){if(this.presentationModel)throw new Error("You can not set a presentation model for an attribute that is already bound.");this.presentationModel=e}getPresentationModel(){return this.presentationModel}getValue(){return this.value}setValueFromServer(e){let t=i.checkValue(e);if(this.value===t)return;let n=this.value;this.value=t,this.valueChangeBus.trigger({oldValue:n,newValue:t,sendToServer:!1})}setValue(e){let t=i.checkValue(e);if(this.value===t)return;let n=this.value;this.value=t,this.valueChangeBus.trigger({oldValue:n,newValue:t,sendToServer:!0})}setQualifier(e){if(this.qualifier===e)return;let t=this.qualifier;this.qualifier=e,this.qualifierChangeBus.trigger({oldValue:t,newValue:e}),this.valueChangeBus.trigger({oldValue:this.value,newValue:this.value,sendToServer:!1})}getQualifier(){return this.qualifier}onValueChange(e){this.valueChangeBus.onEvent(e),e({oldValue:this.value,newValue:this.value,sendToServer:!1})}onQualifierChange(e){this.qualifierChangeBus.onEvent(e)}syncWith(e){e&&(this.setQualifier(e.getQualifier()),this.setValue(e.value))}static checkValue(e){if(null==e||void 0===e)return null;let t=e;(t instanceof String||t instanceof Boolean||t instanceof Number)&&(t=e.valueOf()),t instanceof i&&(i.LOGGER.warn("An Attribute may not itself contain an attribute as a value. Assuming you forgot to call value."),t=this.checkValue(e.value));let n=!1;if((this.SUPPORTED_VALUE_TYPES.indexOf(typeof t)>-1||t instanceof Date)&&(n=!0),!n)throw new Error("Attribute values of this type are not allowed: "+typeof e);return t}}t.a=i,i.LOGGER=o.b.getLogger("ClientAttribute"),i.SUPPORTED_VALUE_TYPES=["string","number","boolean"],i.clientAttributeInstanceCount=0},function(e,t,n){"use strict";var r=n(117),o=n(24),i=n(21),a=n(18),s=n(2);class c{constructor(e){this.clientDolphin=e,this.presentationModels=new Map,this.presentationModelsPerType=new Map,this.attributesPerId=new Map,this.attributesPerQualifier=new Map,this.modelStoreChangeBus=new o.a}getClientDolphin(){return this.clientDolphin}registerAttribute(e){this.addAttributeById(e),e.getQualifier()&&this.addAttributeByQualifier(e),e.onValueChange(t=>{if(t.newValue!==t.oldValue&&!0===t.sendToServer){const n=i.a.createValueChangedCommand(e.id,t.newValue);this.clientDolphin.getClientConnector().send(n,null)}e.getQualifier()&&this.findAttributesByFilter(t=>t!==e&&t.getQualifier()===e.getQualifier()).forEach(t=>{t.setValue(e.getValue())})}),e.onQualifierChange(t=>{this.clientDolphin.getClientConnector().send(i.a.createChangeAttributeMetadataCommand(e.id,r.a.QUALIFIER_PROPERTY,t.newValue),null)})}add(e,t=!0){if(!e)return!1;this.presentationModels.has(e.id)&&c.LOGGER.error("There already is a PM with id "+e.id);let n=!1;if(!this.presentationModels.has(e.id)){if(this.presentationModels.set(e.id,e),this.addPresentationModelByType(e),t)this.clientDolphin.getClientConnector().send(i.a.createCreatePresentationModelCommand(e),null);e.getAttributes().forEach(e=>{this.registerAttribute(e)}),this.modelStoreChangeBus.trigger({eventType:a.a,clientPresentationModel:e}),n=!0}return n}remove(e){if(!e)return!1;let t=!1;return this.presentationModels.has(e.id)&&(this.removePresentationModelByType(e),this.presentationModels.delete(e.id),e.getAttributes().forEach(e=>{this.removeAttributeById(e),e.getQualifier()&&this.removeAttributeByQualifier(e)}),this.modelStoreChangeBus.trigger({eventType:a.o,clientPresentationModel:e}),t=!0),t}findAttributesByFilter(e){let t=[];return this.presentationModels.forEach(n=>{n.getAttributes().forEach(n=>{e(n)&&t.push(n)})}),t}addPresentationModelByType(e){if(!e)return;let t=e.presentationModelType;if(!t)return;let n=this.presentationModelsPerType.get(t);n||(n=[],this.presentationModelsPerType.set(t,n)),n.indexOf(e)>-1||n.push(e)}removePresentationModelByType(e){if(!e||!e.presentationModelType)return;let t=this.presentationModelsPerType.get(e.presentationModelType);t&&(t.length>-1&&t.splice(t.indexOf(e),1),0===t.length&&this.presentationModelsPerType.delete(e.presentationModelType))}listPresentationModelIds(){let e=[],t=this.presentationModels.keys(),n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}listPresentationModels(){let e=[],t=this.presentationModels.values(),n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}findPresentationModelById(e){return this.presentationModels.get(e)}findAllPresentationModelByType(e){return e&&this.presentationModelsPerType.has(e)?this.presentationModelsPerType.get(e).slice(0):[]}deletePresentationModel(e,t){if(e&&this.containsPresentationModel(e.id)){if(this.remove(e),!t||e.clientSideOnly)return;this.clientDolphin.getClientConnector().send(i.a.createPresentationModelDeletedCommand(e.id),null)}}containsPresentationModel(e){return this.presentationModels.has(e)}addAttributeById(e){e&&!this.attributesPerId.has(e.id)&&this.attributesPerId.set(e.id,e)}removeAttributeById(e){e&&this.attributesPerId.has(e.id)&&this.attributesPerId.delete(e.id)}findAttributeById(e){return this.attributesPerId.get(e)}addAttributeByQualifier(e){if(!e||!e.getQualifier())return;let t=this.attributesPerQualifier.get(e.getQualifier());t||(t=[],this.attributesPerQualifier.set(e.getQualifier(),t)),t.indexOf(e)>-1||t.push(e)}removeAttributeByQualifier(e){if(!e||!e.getQualifier())return;let t=this.attributesPerQualifier.get(e.getQualifier());t&&(t.length>-1&&t.splice(t.indexOf(e),1),0===t.length&&this.attributesPerQualifier.delete(e.getQualifier()))}findAllAttributesByQualifier(e){return e&&this.attributesPerQualifier.has(e)?this.attributesPerQualifier.get(e).slice(0):[]}onModelStoreChange(e){this.modelStoreChangeBus.onEvent(e)}onModelStoreChangeForType(e,t){this.modelStoreChangeBus.onEvent(n=>{n.clientPresentationModel.presentationModelType==e&&t(n)})}}t.a=c,c.LOGGER=s.b.getLogger("ClientModelStore")},function(e,t,n){"use strict";class r{}t.a=r,r.QUALIFIER_PROPERTY="qualifier",r.VALUE="value"},function(e,t,n){"use strict";var r=n(23),o=n(2);class i{constructor(e,t=!0,n="UTF-8",o=null,a=!1,s=null){this.url=e,this.charset=n,this.HttpCodes={finished:4,success:200},this.errorHandler=o,this.supportCORS=a,this.headersInfo=s,this.http=new XMLHttpRequest,this.sig=new XMLHttpRequest,this.supportCORS&&"withCredentials"in this.http&&(this.http.withCredentials=!0,this.sig.withCredentials=!0),this.codec=new r.a,t&&(i.LOGGER.error("HttpTransmitter.invalidate() is deprecated. Use ClientDolphin.reset(OnSuccessHandler) instead"),this.invalidate())}transmit(e,t){this.http.onerror=(()=>{this.handleError("onerror",""),t([])}),this.http.onreadystatechange=(()=>{if(this.http.readyState===this.HttpCodes.finished)if(this.http.status===this.HttpCodes.success){let e=this.http.responseText;if(e.trim().length>0)try{let n=this.codec.decode(e);t(n)}catch(n){i.LOGGER.error("Error occurred parsing responseText: ",n,e),this.handleError("application","HttpTransmitter: Incorrect responseText: "+e),t([])}else this.handleError("application","HttpTransmitter: empty responseText"),t([])}else this.handleError("application","HttpTransmitter: HTTP Status != 200"),t([])}),this.http.open("POST",this.url,!0),this.setHeaders(this.http),"overrideMimeType"in this.http&&this.http.overrideMimeType("application/json; charset="+this.charset);let n=this.codec.encode([e]);i.LOGGER.trace("transmitting",e,n),this.http.send(n)}setHeaders(e){if(this.headersInfo)for(let t in this.headersInfo)this.headersInfo.hasOwnProperty(t)&&e.setRequestHeader(t,this.headersInfo[t])}handleError(e,t){let n={kind:e,url:this.url,httpStatus:this.http.status,message:t};this.errorHandler?this.errorHandler(n):i.LOGGER.error("Error occurred: ",n)}signal(e){this.sig.open("POST",this.url,!0),this.setHeaders(this.sig);let t=this.codec.encode([e]);i.LOGGER.trace("signal",e,t),this.sig.send(t)}invalidate(){this.http.open("POST",this.url+"invalidate?",!1),this.http.send()}}t.a=i,i.LOGGER=o.b.getLogger("HttpTransmitter")},function(e,t,n){"use strict";t.a=class{transmit(e,t){t([])}signal(){}reset(){}}},function(e,t,n){"use strict";var r,o,i,a,s=n(58),c=n(3),l=n(8),d=n(39),u=n(5),h=n(6),f=n(13),p=n(38),m=n(17),b=n(74),g=n(75).set,v=n(122)(),y=n(42),C=n(76),O=n(77),j="Promise",w=c.TypeError,M=c.process,_=c[j],E="process"==d(M),P=function(){},A=o=y.f,L=!!function(){try{var e=_.resolve(1),t=(e.constructor={})[n(4)("species")]=function(e){e(P,P)};return(E||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t}catch(e){}}(),R=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},x=function(e,t){if(!e._n){e._n=!0;var n=e._c;v(function(){for(var r=e._v,o=1==e._s,i=0,a=function(t){var n,i,a=o?t.ok:t.fail,s=t.resolve,c=t.reject,l=t.domain;try{a?(o||(2==e._h&&I(e),e._h=1),!0===a?n=r:(l&&l.enter(),n=a(r),l&&l.exit()),n===t.promise?c(w("Promise-chain cycle")):(i=R(n))?i.call(n,s,c):s(n)):c(r)}catch(e){c(e)}};n.length>i;)a(n[i++]);e._c=[],e._n=!1,t&&!e._h&&S(e)})}},S=function(e){g.call(c,function(){var t,n,r,o=e._v,i=T(e);if(i&&(t=C(function(){E?M.emit("unhandledRejection",o,e):(n=c.onunhandledrejection)?n({promise:e,reason:o}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=E||T(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},T=function(e){return 1!==e._h&&0===(e._a||e._c).length},I=function(e){g.call(c,function(){var t;E?M.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})})},N=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),x(t,!0))},B=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw w("Promise can't be resolved itself");(t=R(e))?v(function(){var r={_w:n,_d:!1};try{t.call(e,l(B,r,1),l(N,r,1))}catch(e){N.call(r,e)}}):(n._v=e,n._s=1,x(n,!1))}catch(e){N.call({_w:n,_d:!1},e)}}};L||(_=function(e){p(this,_,j,"_h"),f(e),r.call(this);try{e(l(B,this,1),l(N,this,1))}catch(e){N.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(37)(_.prototype,{then:function(e,t){var n=A(b(this,_));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=E?M.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&x(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r;this.promise=e,this.resolve=l(B,e,1),this.reject=l(N,e,1)},y.f=A=function(e){return e===_||e===a?new i(e):o(e)}),u(u.G+u.W+u.F*!L,{Promise:_}),n(20)(_,j),n(68)(j),a=n(7)[j],u(u.S+u.F*!L,j,{reject:function(e){var t=A(this);return(0,t.reject)(e),t.promise}}),u(u.S+u.F*(s||!L),j,{resolve:function(e){return O(s&&this===a?_:this,e)}}),u(u.S+u.F*!(L&&n(123)(function(e){_.all(e).catch(P)})),j,{all:function(e){var t=this,n=A(t),r=n.resolve,o=n.reject,i=C(function(){var n=[],i=0,a=1;m(e,!1,function(e){var s=i++,c=!1;n.push(void 0),a++,t.resolve(e).then(function(e){c||(c=!0,n[s]=e,--a||r(n))},o)}),--a||r(n)});return i.e&&o(i.v),n.promise},race:function(e){var t=this,n=A(t),r=n.reject,o=C(function(){m(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(3),o=n(75).set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==n(16)(a);e.exports=function(){var e,t,n,l=function(){var r,o;for(c&&(r=a.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(l)};else if(!i||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var d=s.resolve();n=function(){d.then(l)}}else n=function(){o.call(r,l)};else{var u=!0,h=document.createTextNode("");new i(l).observe(h,{characterData:!0}),n=function(){h.data=u=!u}}return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t,n){var r=n(4)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(5),o=n(7),i=n(3),a=n(74),s=n(77);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,o.Promise||i.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var r=n(5),o=n(42),i=n(76);r(r.S,"Promise",{try:function(e){var t=o.f(this),n=i(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){"use strict";var r=n(25),o=n.n(r),i=n(0),a=n(2);class s{constructor(e){Object(i.a)("BeanManager(classRepository)"),Object(i.b)(e,"classRepository"),this.classRepository=e,this.addedHandlers=new o.a,this.removedHandlers=new o.a,this.updatedHandlers=new o.a,this.arrayUpdatedHandlers=new o.a,this.allAddedHandlers=[],this.allRemovedHandlers=[],this.allUpdatedHandlers=[],this.allArrayUpdatedHandlers=[];let t=this;this.classRepository.onBeanAdded((e,n)=>{let r=t.addedHandlers.get(e);Object(i.c)(r)&&r.forEach(t=>{try{t(n)}catch(t){s.LOGGER.error("An exception occurred while calling an onBeanAdded-handler for type",e,t)}}),t.allAddedHandlers.forEach(e=>{try{e(n)}catch(e){s.LOGGER.error("An exception occurred while calling a general onBeanAdded-handler",e)}})}),this.classRepository.onBeanRemoved((e,n)=>{let r=t.removedHandlers.get(e);Object(i.c)(r)&&r.forEach(t=>{try{t(n)}catch(t){s.LOGGER.error("An exception occurred while calling an onBeanRemoved-handler for type",e,t)}}),t.allRemovedHandlers.forEach(e=>{try{e(n)}catch(e){s.LOGGER.error("An exception occurred while calling a general onBeanRemoved-handler",e)}})}),this.classRepository.onBeanUpdate((e,n,r,o,a)=>{let c=t.updatedHandlers.get(e);Object(i.c)(c)&&c.forEach(t=>{try{t(n,r,o,a)}catch(t){s.LOGGER.error("An exception occurred while calling an onBeanUpdate-handler for type",e,t)}}),t.allUpdatedHandlers.forEach(e=>{try{e(n,r,o,a)}catch(e){s.LOGGER.error("An exception occurred while calling a general onBeanUpdate-handler",e)}})}),this.classRepository.onArrayUpdate((e,n,r,o,a,c)=>{let l=t.arrayUpdatedHandlers.get(e);Object(i.c)(l)&&l.forEach(t=>{try{t(n,r,o,a,c)}catch(t){s.LOGGER.error("An exception occurred while calling an onArrayUpdate-handler for type",e,t)}}),t.allArrayUpdatedHandlers.forEach(e=>{try{e(n,r,o,a,c)}catch(e){s.LOGGER.error("An exception occurred while calling a general onArrayUpdate-handler",e)}})})}notifyBeanChange(e,t,n){return Object(i.a)("BeanManager.notifyBeanChange(bean, propertyName, newValue)"),Object(i.b)(e,"bean"),Object(i.b)(t,"propertyName"),this.classRepository.notifyBeanChange(e,t,n)}notifyArrayChange(e,t,n,r,o){Object(i.a)("BeanManager.notifyArrayChange(bean, propertyName, index, count, removedElements)"),Object(i.b)(e,"bean"),Object(i.b)(t,"propertyName"),Object(i.b)(n,"index"),Object(i.b)(r,"count"),Object(i.b)(o,"removedElements"),this.classRepository.notifyArrayChange(e,t,n,r,o)}isManaged(e){throw Object(i.a)("BeanManager.isManaged(bean)"),Object(i.b)(e,"bean"),new Error("Not implemented yet")}create(e){throw Object(i.a)("BeanManager.create(type)"),Object(i.b)(e,"type"),new Error("Not implemented yet")}add(e,t){throw Object(i.a)("BeanManager.add(type, bean)"),Object(i.b)(e,"type"),Object(i.b)(t,"bean"),new Error("Not implemented yet")}addAll(e,t){throw Object(i.a)("BeanManager.addAll(type, collection)"),Object(i.b)(e,"type"),Object(i.b)(t,"collection"),new Error("Not implemented yet")}remove(e){throw Object(i.a)("BeanManager.remove(bean)"),Object(i.b)(e,"bean"),new Error("Not implemented yet")}removeAll(e){throw Object(i.a)("BeanManager.removeAll(collection)"),Object(i.b)(e,"collection"),new Error("Not implemented yet")}removeIf(e){throw Object(i.a)("BeanManager.removeIf(predicate)"),Object(i.b)(e,"predicate"),new Error("Not implemented yet")}onAdded(e,t){let n=this;if(Object(i.c)(t)){Object(i.a)("BeanManager.onAdded(type, eventHandler)"),Object(i.b)(e,"type"),Object(i.b)(t,"eventHandler");let r=n.addedHandlers.get(e);return Object(i.c)(r)||(r=[]),n.addedHandlers.set(e,r.concat(t)),{unsubscribe:()=>{let r=n.addedHandlers.get(e);Object(i.c)(r)&&n.addedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,Object(i.a)("BeanManager.onAdded(eventHandler)"),Object(i.b)(t,"eventHandler"),n.allAddedHandlers=n.allAddedHandlers.concat(t),{unsubscribe:function(){n.allAddedHandlers=n.allAddedHandlers.filter(e=>e!==t)}}}onRemoved(e,t){let n=this;if(Object(i.c)(t)){Object(i.a)("BeanManager.onRemoved(type, eventHandler)"),Object(i.b)(e,"type"),Object(i.b)(t,"eventHandler");let r=n.removedHandlers.get(e);return Object(i.c)(r)||(r=[]),n.removedHandlers.set(e,r.concat(t)),{unsubscribe:()=>{let r=n.removedHandlers.get(e);Object(i.c)(r)&&n.removedHandlers.set(e,r.filter(e=>e!==t))}}}return t=e,Object(i.a)("BeanManager.onRemoved(eventHandler)"),Object(i.b)(t,"eventHandler"),n.allRemovedHandlers=n.allRemovedHandlers.concat(t),{unsubscribe:()=>{n.allRemovedHandlers=n.allRemovedHandlers.filter(e=>e!==t)}}}onBeanUpdate(e,t){let n=this;if(Object(i.c)(t)){Object(i.a)("BeanManager.onBeanUpdate(type, eventHandler)"),Object(i.b)(e,"type"),Object(i.b)(t,"eventHandler");let r=n.updatedHandlers.get(e);return Object(i.c)(r)||(r=[]),n.updatedHandlers.set(e,r.concat(t)),{unsubscribe:()=>{let r=n.updatedHandlers.get(e);Object(i.c)(r)&&n.updatedHandlers.set(e,r.filter(e=>e!==t))}}}return t=e,Object(i.a)("BeanManager.onBeanUpdate(eventHandler)"),Object(i.b)(t,"eventHandler"),n.allUpdatedHandlers=n.allUpdatedHandlers.concat(t),{unsubscribe:function(){n.allUpdatedHandlers=n.allUpdatedHandlers.filter(e=>e!==t)}}}onArrayUpdate(e,t){let n=this;if(Object(i.c)(t)){Object(i.a)("BeanManager.onArrayUpdate(type, eventHandler)"),Object(i.b)(e,"type"),Object(i.b)(t,"eventHandler");let r=n.arrayUpdatedHandlers.get(e);return Object(i.c)(r)||(r=[]),n.arrayUpdatedHandlers.set(e,r.concat(t)),{unsubscribe:()=>{let r=n.arrayUpdatedHandlers.get(e);Object(i.c)(r)&&n.arrayUpdatedHandlers.set(e,r.filter(e=>e!==t))}}}return t=e,Object(i.a)("BeanManager.onArrayUpdate(eventHandler)"),Object(i.b)(t,"eventHandler"),n.allArrayUpdatedHandlers=n.allArrayUpdatedHandlers.concat(t),{unsubscribe:()=>{n.allArrayUpdatedHandlers=n.allArrayUpdatedHandlers.filter(e=>e!==t)}}}}t.a=s,s.LOGGER=a.b.getLogger("BeanManager")},function(e,t,n){"use strict";var r=n(25),o=n.n(r),i=n(18),a=n(0),s=n(2);let c=null;class l{constructor(e){Object(a.a)("ClassRepository(dolphin)"),Object(a.b)(e,"dolphin"),this.dolphin=e,this.classes=new o.a,this.beanFromDolphin=new o.a,this.beanToDolphin=new o.a,this.classInfos=new o.a,this.beanAddedHandlers=[],this.beanRemovedHandlers=[],this.propertyUpdateHandlers=[],this.arrayUpdateHandlers=[]}fixType(e,t){switch(e){case i.c:case i.p:case i.j:case i.n:return parseInt(t);case i.i:case i.g:return parseFloat(t);case i.b:return"true"===String(t).toLowerCase();case i.q:case i.h:return String(t);default:return t}}fromDolphin(e,t,n){if(!Object(a.c)(n))return null;switch(t){case i.f:return e.beanFromDolphin.get(String(n));case i.e:case i.d:case i.l:case i.m:case i.r:return new Date(String(n));default:return this.fixType(t,n)}}toDolphin(e,t,n){if(!Object(a.c)(n))return null;switch(t){case i.f:return e.beanToDolphin.get(n);case i.e:case i.d:case i.l:case i.m:case i.r:return n instanceof Date?n.toISOString():n;default:return this.fixType(t,n)}}sendListSplice(e,t,n,r,o,i){let s=e.dolphin,c=s.findPresentationModelById(t),l=this;if(Object(a.c)(c)){let d=e.classes.get(c.presentationModelType)[n];if(Object(a.c)(d)){let a=[s.attribute("@@@ SOURCE_SYSTEM @@@",null,"client"),s.attribute("source",null,t),s.attribute("attribute",null,n),s.attribute("from",null,r),s.attribute("to",null,o),s.attribute("count",null,i.length)];i.forEach(function(t,n){a.push(s.attribute(n.toString(),null,l.toDolphin(e,d,t)))}),s.presentationModel.apply(s,[null,"@DP:LS@"].concat(a))}}}validateList(e,t,n,r){let o=n[r];Object(a.c)(o)||e.propertyUpdateHandlers.forEach(function(e){try{e(t,n,r,[],void 0)}catch(e){l.LOGGER.error("An exception occurred while calling an onBeanUpdate-handler",e)}})}block(e,t){if(Object(a.c)(c))throw new Error("Trying to create a block while another block exists");c={bean:e,propertyName:t}}isBlocked(e,t){return Object(a.c)(c)&&c.bean===e&&c.propertyName===t}unblock(){c=null}notifyBeanChange(e,t,n){Object(a.a)("ClassRepository.notifyBeanChange(bean, propertyName, newValue)"),Object(a.b)(e,"bean"),Object(a.b)(t,"propertyName");let r=this.beanToDolphin.get(e);if(Object(a.c)(r)){let e=this.dolphin.findPresentationModelById(r);if(Object(a.c)(e)){let r=this.classes.get(e.presentationModelType)[t],o=e.findAttributeByPropertyName(t);if(Object(a.c)(r)&&Object(a.c)(o)){let e=o.getValue();return o.setValue(this.toDolphin(this,r,n)),this.fromDolphin(this,r,e)}}}}notifyArrayChange(e,t,n,r,o){if(Object(a.a)("ClassRepository.notifyArrayChange(bean, propertyName, index, count, removedElements)"),Object(a.b)(e,"bean"),Object(a.b)(t,"propertyName"),Object(a.b)(n,"index"),Object(a.b)(r,"count"),Object(a.b)(o,"removedElements"),this.isBlocked(e,t))return;let i=this.beanToDolphin.get(e),s=e[t];if(Object(a.c)(i)&&Object(a.c)(s)){let e=Array.isArray(o)?o.length:0;this.sendListSplice(this,i,t,n,n+e,s.slice(n,n+r))}}onBeanAdded(e){Object(a.a)("ClassRepository.onBeanAdded(handler)"),Object(a.b)(e,"handler"),this.beanAddedHandlers.push(e)}onBeanRemoved(e){Object(a.a)("ClassRepository.onBeanRemoved(handler)"),Object(a.b)(e,"handler"),this.beanRemovedHandlers.push(e)}onBeanUpdate(e){Object(a.a)("ClassRepository.onBeanUpdate(handler)"),Object(a.b)(e,"handler"),this.propertyUpdateHandlers.push(e)}onArrayUpdate(e){Object(a.a)("ClassRepository.onArrayUpdate(handler)"),Object(a.b)(e,"handler"),this.arrayUpdateHandlers.push(e)}registerClass(e){if(Object(a.a)("ClassRepository.registerClass(model)"),Object(a.b)(e,"model"),this.classes.has(e.id))return;let t={};e.attributes.filter(function(e){return e.propertyName.search(/^@/)<0}).forEach(function(e){t[e.propertyName]=e.value}),this.classes.set(e.id,t)}unregisterClass(e){Object(a.a)("ClassRepository.unregisterClass(model)"),Object(a.b)(e,"model"),this.classes.delete(e.id)}load(e){Object(a.a)("ClassRepository.load(model)"),Object(a.b)(e,"model");let t=this,n=this.classes.get(e.presentationModelType),r={};return e.attributes.filter(function(e){return e.propertyName.search(/^@/)<0}).forEach(function(o){r[o.propertyName]=null,o.onValueChange(function(i){if(i.oldValue!==i.newValue){let a=t.fromDolphin(t,n[o.propertyName],i.oldValue),s=t.fromDolphin(t,n[o.propertyName],i.newValue);t.propertyUpdateHandlers.forEach(t=>{try{t(e.presentationModelType,r,o.propertyName,s,a)}catch(e){l.LOGGER.error("An exception occurred while calling an onBeanUpdate-handler",e)}})}})}),this.beanFromDolphin.set(e.id,r),this.beanToDolphin.set(r,e.id),this.classInfos.set(e.id,n),this.beanAddedHandlers.forEach(t=>{try{t(e.presentationModelType,r)}catch(e){l.LOGGER.error("An exception occurred while calling an onBeanAdded-handler",e)}}),r}unload(e){Object(a.a)("ClassRepository.unload(model)"),Object(a.b)(e,"model");let t=this.beanFromDolphin.get(e.id);return this.beanFromDolphin.delete(e.id),this.beanToDolphin.delete(t),this.classInfos.delete(e.id),Object(a.c)(t)&&this.beanRemovedHandlers.forEach(n=>{try{n(e.presentationModelType,t)}catch(e){l.LOGGER.error("An exception occurred while calling an onBeanRemoved-handler",e)}}),t}spliceListEntry(e){Object(a.a)("ClassRepository.spliceListEntry(model)"),Object(a.b)(e,"model");let t=e.findAttributeByPropertyName("source"),n=e.findAttributeByPropertyName("attribute"),r=e.findAttributeByPropertyName("from"),o=e.findAttributeByPropertyName("to"),i=e.findAttributeByPropertyName("count");if(!(Object(a.c)(t)&&Object(a.c)(n)&&Object(a.c)(r)&&Object(a.c)(o)&&Object(a.c)(i)))throw new Error("Invalid list modification update received");{let s=this.classInfos.get(t.value),c=this.beanFromDolphin.get(t.value);if(!Object(a.c)(c)||!Object(a.c)(s))throw new Error("Invalid list modification update received. Source bean unknown.");{let t=e.presentationModelType;this.validateList(this,t,c,n.value);let d=[],u=null;for(let t=0;t<i.value;t++){if(u=e.findAttributeByPropertyName(t.toString()),!Object(a.c)(u))throw new Error("Invalid list modification update received");d.push(this.fromDolphin(this,s[n.value],u.value))}try{this.block(c,n.value),this.arrayUpdateHandlers.forEach(e=>{try{e(t,c,n.value,r.value,o.value-r.value,d)}catch(e){l.LOGGER.error("An exception occurred while calling an onArrayUpdate-handler",e)}})}finally{this.unblock()}}}}mapParamToDolphin(e){if(!Object(a.c)(e))return e;let t=typeof e;if("object"===t){if(e instanceof Date)return e.toISOString();{let t=this.beanToDolphin.get(e);if(Object(a.c)(t))return t;throw new TypeError("Only managed Dolphin Beans can be used")}}if("string"===t||"number"===t||"boolean"===t)return e;throw new TypeError("Only managed Dolphin Beans and primitive types can be used")}mapDolphinToBean(e){return this.fromDolphin(this,i.f,e)}}t.a=l,l.LOGGER=s.b.getLogger("ClassRepository")},function(e,t,n){"use strict";var r=n(41),o=n.n(r),i=n(78),a=n.n(i),s=n(0),c=n(133),l=n(21),d=n(22);const u="controllerId",h="model",f="errorCode";t.a=class{constructor(e,t,n){Object(s.a)("ControllerManager(dolphin, classRepository, connector)"),Object(s.b)(e,"dolphin"),Object(s.b)(t,"classRepository"),Object(s.b)(n,"connector"),this.dolphin=e,this.classRepository=t,this.connector=n,this.controllers=new a.a}createController(e){return this._createController(e,null)}_createController(e,t){Object(s.a)("ControllerManager.createController(name)"),Object(s.b)(e,"name");let n,r,i,a,d=this;return new o.a(o=>{d.connector.getHighlanderPM().then(s=>{d.connector.invoke(l.a.createCreateControllerCommand(e,t)).then(()=>{n=s.findAttributeByPropertyName(u).getValue(),r=s.findAttributeByPropertyName(h).getValue(),i=d.classRepository.mapDolphinToBean(r),a=new c.a(n,i,d),d.controllers.add(a),o(a)})})})}invokeAction(e,t,n){Object(s.a)("ControllerManager.invokeAction(controllerId, actionName, params)"),Object(s.b)(e,"controllerId"),Object(s.b)(t,"actionName");let r=this;return new o.a((o,i)=>{let a=[r.dolphin.attribute(d.b,null,d.c),r.dolphin.attribute(f)],c=r.dolphin.presentationModel.apply(r.dolphin,[null,d.a].concat(a)),u=[];if(Object(s.c)(n))for(var h in n)if(n.hasOwnProperty(h)){let e=r.classRepository.mapParamToDolphin(n[h]);u.push({name:h,value:e})}r.connector.invoke(l.a.createCallActionCommand(e,t,u)).then(()=>{c.findAttributeByPropertyName(f).getValue()?i(new Error("Server side ControllerAction "+t+" caused an error. Please see server log for details.")):o(),r.dolphin.deletePresentationModel(c)})})}destroyController(e){Object(s.a)("ControllerManager.destroyController(controller)"),Object(s.b)(e,"controller");let t=this;return new o.a(n=>{t.connector.getHighlanderPM().then(r=>{t.controllers.delete(e),r.findAttributeByPropertyName(u).setValue(e.controllerId),t.connector.invoke(l.a.createDestroyControllerCommand(e.getId())).then(n)})})}destroy(){let e=this.controllers,t=[];return this.controllers=new a.a,e.forEach(e=>{try{t.push(e.destroy())}catch(e){}}),o.a.all(t)}}},function(e,t,n){"use strict";var r=n(67),o=n(40);e.exports=n(70)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(o(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){var r=n(5);r(r.P+r.R,"Set",{toJSON:n(71)("Set")})},function(e,t,n){n(72)("Set")},function(e,t,n){n(73)("Set")},function(e,t,n){"use strict";var r=n(78),o=n.n(r),i=n(0),a=n(2);class s{constructor(e,t,n){Object(i.a)("ControllerProxy(controllerId, model, manager)"),Object(i.b)(e,"controllerId"),Object(i.b)(t,"model"),Object(i.b)(n,"manager"),this.controllerId=e,this.model=t,this.manager=n,this.destroyed=!1,this.onDestroyedHandlers=new o.a}getModel(){return this.model}getId(){return this.controllerId}invoke(e,t){if(Object(i.a)("ControllerProxy.invoke(name, params)"),Object(i.b)(e,"name"),this.destroyed)throw new Error("The controller was already destroyed");return this.manager.invokeAction(this.controllerId,e,t)}createController(e){return this.manager._createController(e,this.getId())}destroy(){if(this.destroyed)throw new Error("The controller was already destroyed");return this.destroyed=!0,this.onDestroyedHandlers.forEach(e=>{try{e(this)}catch(e){s.LOGGER.error("An exception occurred while calling an onDestroyed-handler",e)}},this),this.manager.destroyController(this)}onDestroyed(e){Object(i.a)("ControllerProxy.onDestroyed(handler)"),Object(i.b)(e,"handler");let t=this;return this.onDestroyedHandlers.add(e),{unsubscribe:()=>{t.onDestroyedHandlers.delete(e)}}}}t.a=s,s.LOGGER=a.b.getLogger("ControllerProxy")},function(e,t,n){"use strict";var r=n(79),o=n.n(r),i=n(41),a=n.n(i),s=n(21),c=n(0);class l{constructor(e,t,n,r){Object(c.a)("ClientContext(dolphin, beanManager, controllerManager, connector)"),Object(c.b)(e,"dolphin"),Object(c.b)(t,"beanManager"),Object(c.b)(n,"controllerManager"),Object(c.b)(r,"connector"),this.dolphin=e,this.beanManager=t,this._controllerManager=n,this._connector=r,this.connectionPromise=null,this.isConnected=!1}connect(){let e=this;return this.connectionPromise=new a.a(t=>{e._connector.connect(),e._connector.invoke(s.a.createCreateContextCommand()).then(()=>{e.isConnected=!0,t()})}),this.connectionPromise}onConnect(){return Object(c.c)(this.connectionPromise)?this.isConnected?new a.a(e=>{e()}):this.connectionPromise:this.connect()}createController(e){return Object(c.a)("ClientContext.createController(name)"),Object(c.b)(e,"name"),this._controllerManager.createController(e)}disconnect(){let e=this;return this.dolphin.stopPushListening(),new a.a(t=>{e._controllerManager.destroy().then(()=>{e._connector.invoke(s.a.createDestroyContextCommand()),e.dolphin=null,e.beanManager=null,e._controllerManager=null,e._connector=null,t()})})}}t.a=l,o()(l.prototype)},function(e,t,n){"use strict";var r=n(79),o=n.n(r),i=n(0),a=n(136),s=n(23),c=n(137),l=n(2),d=n(1);const u=4,h=200,f=408,p="dolphin_platform_intern_dolphinClientId";class m{constructor(e,t){this.url=e,this.config=t,this.headersInfo=Object(i.c)(t)?t.headersInfo:null;let n=Object(i.c)(t)?t.connection:null;this.maxRetry=Object(i.c)(n)&&Object(i.c)(n.maxRetry)?n.maxRetry:3,this.timeout=Object(i.c)(n)&&Object(i.c)(n.timeout)?n.timeout:5e3,this.failed_attempt=0}_handleError(e,t){let n=Object(i.c)(this.config)?this.config.connection:null;(Object(i.c)(n)&&Object(i.c)(n.errorHandlers)?n.errorHandlers:[new c.a]).forEach(function(e){e.onError(t)}),e(t)}_send(e){return new Promise((t,n)=>{const r=new XMLHttpRequest;if(r.withCredentials=!0,r.onerror=(e=>{m.LOGGER.error("HTTP network error",e),this._handleError(n,new a.c("PlatformHttpTransmitter: Network error",e))}),r.onreadystatechange=(()=>{if(r.readyState===u)switch(r.status){case h:{this.failed_attempt=0;const e=r.getResponseHeader(p);if(Object(i.c)(e)?(Object(i.c)(this.clientId)&&this.clientId!==e&&this._handleError(n,new a.b("PlatformHttpTransmitter: ClientId of the response did not match")),this.clientId=e):this._handleError(n,new a.b("PlatformHttpTransmitter: Server did not send a clientId")),m.LOGGER.isLogLevelUseable(l.a.DEBUG)&&!m.LOGGER.isLogLevelUseable(l.a.TRACE))try{let t=JSON.parse(r.responseText);t.length>0&&m.LOGGER.debug("HTTP response with SUCCESS",e,t)}catch(e){m.LOGGER.error("Response could not be parsed to JSON for logging")}m.LOGGER.trace("HTTP response with SUCCESS",e,r.responseText),t(r.responseText);break}case f:m.LOGGER.error("HTTP request timeout"),this._handleError(n,new a.b("PlatformHttpTransmitter: Session Timeout"));break;default:this.failed_attempt<=this.maxRetry&&(this.failed_attempt=this.failed_attempt+1),m.LOGGER.error("HTTP unsupported status, with HTTP status",r.status),this._handleError(n,new a.d("PlatformHttpTransmitter: HTTP Status != 200 ("+r.status+")"))}}),r.open("POST",this.url),Object(i.c)(this.clientId)&&r.setRequestHeader(p,this.clientId),Object(i.c)(this.headersInfo))for(let e in this.headersInfo)this.headersInfo.hasOwnProperty(e)&&r.setRequestHeader(e,this.headersInfo[e]);let o=s.a.encode(e);if(m.LOGGER.isLogLevelUseable(l.a.DEBUG)&&!m.LOGGER.isLogLevelUseable(l.a.TRACE))for(let t=0;t<e.length;t++){let n=e[t];n.id===d.v&&m.LOGGER.debug("send",n,o)}m.LOGGER.trace("send",e,o),this.failed_attempt>this.maxRetry?setTimeout(function(){r.send(o)},this.timeout):r.send(o)})}transmit(e,t){this._send(e).then(e=>{if(e.trim().length>0)try{const n=s.a.decode(e);t(n)}catch(n){this.emit("error",new a.a("PlatformHttpTransmitter: Parse error: (Incorrect response = "+e+")")),t([])}else this.emit("error",new a.a("PlatformHttpTransmitter: Empty response")),t([])}).catch(e=>{this.emit("error",e),t([])})}signal(e){this._send([e]).catch(e=>this.emit("error",e))}}t.a=m,m.LOGGER=l.b.getLogger("PlatformHttpTransmitter"),o()(m.prototype)},function(e,t,n){"use strict";t.a=class extends Error{constructor(e="Remoting Error",t){super(e),this.detail=t||void 0}};t.b=class extends Error{constructor(e="Session Error"){super(e)}};t.d=class extends Error{constructor(e="Http Response Error"){super(e)}};t.c=class extends Error{constructor(e="Http Network Error"){super(e)}}},function(e,t,n){"use strict";var r=n(2);class o{onError(e){o.LOGGER.error(e)}}t.a=o,o.LOGGER=r.b.getLogger("RemotingErrorHandler")}])});
//# sourceMappingURL=dolphin-platform.min.js.map