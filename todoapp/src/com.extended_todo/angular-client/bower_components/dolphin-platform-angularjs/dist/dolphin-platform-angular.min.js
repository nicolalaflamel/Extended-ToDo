!function(){return function e(t,n,r){function o(a,c){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!c&&u)return u(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var s=n[a]={exports:{}};t[a][0].call(s.exports,function(e){var n=t[a][1][e];return o(n||e)},s,s.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}}()({1:[function(e,t,n){"use strict";var r,o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r="undefined"!=typeof self?self:void 0,o=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=80)}([function(e,t,n){var r;function o(e){return null!=e}t.c=o,t.a=function(e){r=e},t.b=function(e,t){if(!o(e))throw new Error("The parameter "+t+" is mandatory in "+r)}},function(e,t,n){t.b="AttributeMetadataChanged";t.c="CallAction";t.d="ChangeAttributeMetadata";t.f="CreateContext";t.g="CreateController";t.h="CreatePresentationModel";t.i="DeletePresentationModel";t.j="DestroyContext";t.k="DestroyController";t.m="InterruptLongPoll";t.s="PresentationModelDeleted";t.t="StartLongPoll";t.v="ValueChanged";t.l="id";t.a="a_id";t.q="p_id";t.e="c_id";t.r="t";t.n="n";t.u="v";t.o="p";t.p="a"},function(e,t,n){var r=n(57),o=n(87);n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return o.a})},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(62)("wks"),o=n(35),i=n(3).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},function(e,t,n){var r=n(3),o=n(7),i=n(8),a=n(9),c="prototype",u=function e(t,n,u){var l,s,d,f=t&e.F,h=t&e.G,p=t&e.S,v=t&e.P,m=t&e.B,b=t&e.W,y=h?o:o[n]||(o[n]={}),g=y[c],C=h?r:p?r[n]:(r[n]||{})[c];for(l in h&&(u=n),u)(s=!f&&C&&void 0!==C[l])&&l in y||(d=s?C[l]:u[l],y[l]=h&&"function"!=typeof C[l]?u[l]:m&&s?i(d,r):b&&C[l]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[c]=e[c],t}(d):v&&"function"==typeof d?i(Function.call,d):d,v&&((y.virtual||(y.virtual={}))[l]=d,t&e.R&&g&&!g[l]&&a(g,l,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t){e.exports=function(e){return"object"===(void 0===e?"undefined":a(e))?null!==e:"function"==typeof e}},function(e,t){var n=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(13);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(10),o=n(59);e.exports=n(12)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(11),o=n(89),i=n(90),a=Object.defineProperty;t.f=n(12)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(6);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(19)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports={}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(8),o=n(102),i=n(103),a=n(11),c=n(33),u=n(104),l={},s={};(t=e.exports=function(e,t,n,d,f){var h,p,v,m,b=f?function(){return e}:u(e),y=r(n,d,t?2:1),g=0;if("function"!=typeof b)throw TypeError(e+" is not iterable!");if(i(b)){for(h=c(e.length);h>g;g++)if((m=t?y(a(p=e[g])[0],p[1]):y(e[g]))===l||m===s)return m}else for(v=b.call(e);!(p=v.next()).done;)if((m=o(v,y,p.value,t))===l||m===s)return m}).BREAK=l,t.RETURN=s},function(e,t,n){t.k="string";t.f=0;t.c=1;t.p=2;t.j=3;t.n=4;t.i=5;t.g=6;t.b=7;t.q=8;t.e=9;t.h=10;t.d=11;t.l=55;t.m=52;t.r=54;t.a="ADDED";t.o="REMOVED"},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(10).f,o=n(14),i=n(4)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){var r=n(47),o=n(48),a=n(45),c=n(52),u=n(51),s=n(55),d=n(53),f=n(49),h=n(50),p=n(54),v=n(43),m=n(46),b=n(44),y=function(){function e(){l(this,e)}return i(e,null,[{key:"createCreateContextCommand",value:function(){return new r.a}},{key:"createCreateControllerCommand",value:function(e,t){var n=new o.a;return n.init(e,t),n}},{key:"createCallActionCommand",value:function(e,t,n){var r=new a.a;return r.init(e,t,n),r}},{key:"createDestroyControllerCommand",value:function(e){var t=new c.a;return t.init(e),t}},{key:"createDestroyContextCommand",value:function(){return new u.a}},{key:"createStartLongPollCommand",value:function(){return new s.a}},{key:"createInterruptLongPollCommand",value:function(){return new d.a}},{key:"createCreatePresentationModelCommand",value:function(e){var t=new f.a;return t.init(e),t}},{key:"createDeletePresentationModelCommand",value:function(e){var t=new h.a;return t.init(e),t}},{key:"createPresentationModelDeletedCommand",value:function(e){var t=new p.a;return t.init(e),t}},{key:"createValueChangedCommand",value:function(e,t){var n=new v.a;return n.init(e,t),n}},{key:"createChangeAttributeMetadataCommand",value:function(e,t,n){var r=new m.a;return r.init(e,t,n),r}},{key:"createAttributeMetadataChangedCommand",value:function(e,t,n){var r=new b.a;return r.init(e,t,n),r}}]),e}();t.a=y},function(e,t,n){n.d(t,"b",function(){return h}),n.d(t,"c",function(){return p}),n.d(t,"a",function(){return d});var r=n(41),o=n.n(r),a=n(0),c=n(21),u=n(18),s="@@@ DOLPHIN_BEAN @@@",d="@@@ CONTROLLER_ACTION_CALL_BEAN @@@",f="@DP:LS@",h="@@@ SOURCE_SYSTEM @@@",p="client",v="server",m=function(){function e(t,n,r,i){l(this,e),Object(a.a)("Connector(url, dolphin, classRepository, config)"),Object(a.b)(t,"url"),Object(a.b)(n,"dolphin"),Object(a.b)(r,"classRepository");var c=this;this.dolphin=n,this.config=i,this.classRepository=r,this.highlanderPMResolver=function(){},this.highlanderPMPromise=new o.a(function(e){c.highlanderPMResolver=e}),n.getClientModelStore().onModelStoreChange(function(e){var t=e.clientPresentationModel,n=t.findAttributeByPropertyName(h);Object(a.c)(n)&&n.value===v&&(e.eventType===u.a?c.onModelAdded(t):e.eventType===u.o&&c.onModelRemoved(t))})}return i(e,[{key:"connect",value:function(){this.dolphin.startPushListening(c.a.createStartLongPollCommand(),c.a.createInterruptLongPollCommand())}},{key:"onModelAdded",value:function(e){switch(Object(a.a)("Connector.onModelAdded(model)"),Object(a.b)(e,"model"),e.presentationModelType){case d:break;case s:this.classRepository.registerClass(e);break;case"@@@ HIGHLANDER_BEAN @@@":this.highlanderPMResolver(e);break;case f:this.classRepository.spliceListEntry(e),this.dolphin.deletePresentationModel(e);break;default:this.classRepository.load(e)}}},{key:"onModelRemoved",value:function(e){switch(Object(a.a)("Connector.onModelRemoved(model)"),Object(a.b)(e,"model"),e.presentationModelType){case s:this.classRepository.unregisterClass(e);break;case f:break;default:this.classRepository.unload(e)}}},{key:"invoke",value:function(e){Object(a.a)("Connector.invoke(command)"),Object(a.b)(e,"command");var t=this.dolphin;return new o.a(function(n){t.send(e,{onFinished:function(){n()}})})}},{key:"getHighlanderPM",value:function(){return this.highlanderPMPromise}}]),e}();t.d=m},function(e,t,n){var r=n(0),o=n(18),c=n(1),u=n(43),s=n(44),d=n(45),f=n(46),h=n(47),p=n(48),v=n(49),m=n(50),b=n(51),y=n(52),g=n(53),C=n(54),O=n(55),j=n(86),k=function(){function e(){l(this,e)}return i(e,null,[{key:"_encodeAttributeMetadataChangedCommand",value:function(e){Object(r.a)("Codec.encodeAttributeMetadataChangedCommand"),Object(r.b)(e,"command"),Object(r.b)(e.attributeId,"command.attributeId"),Object(r.b)(e.metadataName,"command.metadataName");var t={};return t[c.l]=c.b,t[c.a]=e.attributeId,t[c.n]=e.metadataName,t[c.u]=e.value,t}},{key:"_decodeAttributeMetadataChangedCommand",value:function(e){Object(r.a)("Codec.decodeAttributeMetadataChangedCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[c.a],"jsonCommand[ATTRIBUTE_ID]"),Object(r.b)(e[c.n],"jsonCommand[NAME]");var t=new s.a;return t.attributeId=e[c.a],t.metadataName=e[c.n],t.value=e[c.u],t}},{key:"_encodeCallActionCommand",value:function(e){Object(r.a)("Codec.encodeCallActionCommand"),Object(r.b)(e,"command"),Object(r.b)(e.controllerid,"command.controllerid"),Object(r.b)(e.actionName,"command.actionName"),Object(r.b)(e.params,"command.params");var t={};return t[c.l]=c.c,t[c.e]=e.controllerid,t[c.n]=e.actionName,t[c.o]=e.params.map(function(e){var t={};return t[c.n]=e.name,Object(r.c)(e.value)&&(t[c.u]=e.value),t}),t}},{key:"_decodeCallActionCommand",value:function(e){Object(r.a)("Codec.decodeCallActionCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[c.e],"jsonCommand[CONTROLLER_ID]"),Object(r.b)(e[c.n],"jsonCommand[NAME]"),Object(r.b)(e[c.o],"jsonCommand[PARAMS]");var t=new d.a;return t.controllerid=e[c.e],t.actionName=e[c.n],t.params=e[c.o].map(function(e){return{name:e[c.n],value:Object(r.c)(e[c.u])?e[c.u]:null}}),t}},{key:"_encodeChangeAttributeMetadataCommand",value:function(e){Object(r.a)("Codec.encodeChangeAttributeMetadataCommand"),Object(r.b)(e,"command"),Object(r.b)(e.attributeId,"command.attributeId"),Object(r.b)(e.metadataName,"command.metadataName");var t={};return t[c.l]=c.d,t[c.a]=e.attributeId,t[c.n]=e.metadataName,t[c.u]=e.value,t}},{key:"_decodeChangeAttributeMetadataCommand",value:function(e){Object(r.a)("Codec.decodeChangeAttributeMetadataCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[c.a],"jsonCommand[ATTRIBUTE_ID]"),Object(r.b)(e[c.n],"jsonCommand[NAME]");var t=new f.a;return t.attributeId=e[c.a],t.metadataName=e[c.n],t.value=e[c.u],t}},{key:"_encodeCreateContextCommand",value:function(e){Object(r.a)("Codec.encodeCreateContextCommand"),Object(r.b)(e,"command");var t={};return t[c.l]=c.f,t}},{key:"_decodeCreateContextCommand",value:function(e){return Object(r.a)("Codec.decodeCreateContextCommand"),Object(r.b)(e,"jsonCommand"),new h.a}},{key:"_encodeCreateControllerCommand",value:function(e){Object(r.a)("Codec._encodeCreateControllerCommand"),Object(r.b)(e,"command"),Object(r.b)(e.controllerName,"command.controllerName");var t={};return t[c.l]=c.g,t[c.n]=e.controllerName,t[c.e]=e.parentControllerId,t}},{key:"_decodeCreateControllerCommand",value:function(e){Object(r.a)("Codec._decodeCreateControllerCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[c.n],"jsonCommand[NAME]"),Object(r.b)(e[c.e],"jsonCommand[CONTROLLER_ID]");var t=new p.a;return t.controllerName=e[c.n],t.parentControllerId=e[c.e],t}},{key:"_encodeCreatePresentationModelCommand",value:function(e){Object(r.a)("Codec.encodeCreatePresentationModelCommand"),Object(r.b)(e,"command"),Object(r.b)(e.pmId,"command.pmId"),Object(r.b)(e.pmType,"command.pmType");var t={};return t[c.l]=c.h,t[c.q]=e.pmId,t[c.r]=e.pmType,t[c.p]=e.attributes.map(function(e){var t={};return t[c.n]=e.propertyName,t[c.a]=e.id,Object(r.c)(e.value)&&(t[c.u]=e.value),t}),t}},{key:"_decodeCreatePresentationModelCommand",value:function(e){Object(r.a)("Codec.decodeCreatePresentationModelCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[c.q],"jsonCommand[PM_ID]"),Object(r.b)(e[c.r],"jsonCommand[PM_TYPE]");var t=new v.a;return t.pmId=e[c.q],t.pmType=e[c.r],t.attributes=e[c.p].map(function(e){return{propertyName:e[c.n],id:e[c.a],value:Object(r.c)(e[c.u])?e[c.u]:null}}),t}},{key:"_encodeDeletePresentationModelCommand",value:function(e){Object(r.a)("Codec._encodeDeletePresentationModelCommand"),Object(r.b)(e,"command"),Object(r.b)(e.pmId,"command.pmId");var t={};return t[c.l]=c.i,t[c.q]=e.pmId,t}},{key:"_decodeDeletePresentationModelCommand",value:function(e){Object(r.a)("Codec._decodeDeletePresentationModelCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[c.q],"jsonCommand[PM_ID]");var t=new m.a;return t.pmId=e[c.q],t}},{key:"_encodeDestroyContextCommand",value:function(e){Object(r.a)("Codec._encodeDestroyContextCommand"),Object(r.b)(e,"command");var t={};return t[c.l]=c.j,t}},{key:"_decodeDestroyContextCommand",value:function(e){return Object(r.a)("Codec._decodeDestroyContextCommand"),Object(r.b)(e,"jsonCommand"),new b.a}},{key:"_encodeDestroyControllerCommand",value:function(e){Object(r.a)("Codec._encodeDestroyControllerCommand"),Object(r.b)(e,"command"),Object(r.b)(e.controllerId,"command.controllerId");var t={};return t[c.l]=c.k,t[c.e]=e.controllerId,t}},{key:"_decodeDestroyControllerCommand",value:function(e){Object(r.a)("Codec._decodeDestroyControllerCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[c.e],"jsonCommand[CONTROLLER_ID]");var t=new y.a;return t.controllerId=e[c.e],t}},{key:"_encodeInterruptLongPollCommand",value:function(e){Object(r.a)("Codec._encodeInterruptLongPollCommand"),Object(r.b)(e,"command");var t={};return t[c.l]=c.m,t}},{key:"_decodeInterruptLongPollCommand",value:function(e){return Object(r.a)("Codec._decodeInterruptLongPollCommand"),Object(r.b)(e,"jsonCommand"),new g.a}},{key:"_encodePresentationModelDeletedCommand",value:function(e){Object(r.a)("Codec._encodePresentationModelDeletedCommand"),Object(r.b)(e,"command"),Object(r.b)(e.pmId,"command.pmId");var t={};return t[c.l]=c.s,t[c.q]=e.pmId,t}},{key:"_decodePresentationModelDeletedCommand",value:function(e){Object(r.a)("Codec._decodePresentationModelDeletedCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[c.q],"jsonCommand[PM_ID]");var t=new C.a;return t.pmId=e[c.q],t}},{key:"_encodeStartLongPollCommand",value:function(e){Object(r.a)("Codec._encodeStartLongPollCommand"),Object(r.b)(e,"command");var t={};return t[c.l]=c.t,t}},{key:"_decodeStartLongPollCommand",value:function(e){return Object(r.a)("Codec._decodeStartLongPollCommand"),Object(r.b)(e,"jsonCommand"),new O.a}},{key:"_encodeValueChangedCommand",value:function(e){Object(r.a)("Codec.encodeValueChangedCommand"),Object(r.b)(e,"command"),Object(r.b)(e.attributeId,"command.attributeId");var t={};return t[c.l]=c.v,t[c.a]=e.attributeId,Object(r.c)(e.newValue)&&(t[c.u]=e.newValue),t}},{key:"_decodeValueChangedCommand",value:function(e){Object(r.a)("Codec.decodeValueChangedCommand"),Object(r.b)(e,"jsonCommand"),Object(r.b)(e[c.a],"jsonCommand[ATTRIBUTE_ID]");var t=new u.a;return t.attributeId=e[c.a],Object(r.c)(e[c.u])?t.newValue=e[c.u]:t.newValue=null,t}},{key:"encode",value:function(e){Object(r.a)("Codec.encode"),Object(r.b)(e,"commands");var t=this;return JSON.stringify(e.map(function(e){if(e.id===c.b)return t._encodeAttributeMetadataChangedCommand(e);if(e.id===c.c)return t._encodeCallActionCommand(e);if(e.id===c.d)return t._encodeChangeAttributeMetadataCommand(e);if(e.id===c.f)return t._encodeCreateContextCommand(e);if(e.id===c.g)return t._encodeCreateControllerCommand(e);if(e.id===c.h)return t._encodeCreatePresentationModelCommand(e);if(e.id===c.i)return t._encodeDeletePresentationModelCommand(e);if(e.id===c.j)return t._encodeDestroyContextCommand(e);if(e.id===c.k)return t._encodeDestroyControllerCommand(e);if(e.id===c.m)return t._encodeInterruptLongPollCommand(e);if(e.id===c.s)return t._encodePresentationModelDeletedCommand(e);if(e.id===c.t)return t._encodeStartLongPollCommand(e);if(e.id===c.v)return t._encodeValueChangedCommand(e);throw new j.a("Command of type "+e.id+" can not be handled")}))}},{key:"decode",value:function(e){if(Object(r.a)("Codec.decode"),Object(r.b)(e,"transmitted"),(void 0===e?"undefined":a(e))===o.k){var t=this;return JSON.parse(e).map(function(e){if(e.id===c.b)return t._decodeAttributeMetadataChangedCommand(e);if(e.id===c.c)return t._decodeCallActionCommand(e);if(e.id===c.d)return t._decodeChangeAttributeMetadataCommand(e);if(e.id===c.f)return t._decodeCreateContextCommand(e);if(e.id===c.g)return t._decodeCreateControllerCommand(e);if(e.id===c.h)return t._decodeCreatePresentationModelCommand(e);if(e.id===c.i)return t._decodeDeletePresentationModelCommand(e);if(e.id===c.j)return t._decodeDestroyContextCommand(e);if(e.id===c.k)return t._decodeDestroyControllerCommand(e);if(e.id===c.m)return t._decodeInterruptLongPollCommand(e);if(e.id===c.s)return t._decodePresentationModelDeletedCommand(e);if(e.id===c.t)return t._decodeStartLongPollCommand(e);if(e.id===c.v)return t._decodeValueChangedCommand(e);throw new j.a("Command of type "+e.id+" can not be handled")})}throw new j.a("Can not decode data that is not of type string")}}]),e}();t.a=k},function(e,t,n){var r=function(){function e(){l(this,e),this.eventHandlers=[]}return i(e,[{key:"onEvent",value:function(e){this.eventHandlers.push(e)}},{key:"trigger",value:function(e){this.eventHandlers.forEach(function(t){return t(e)})}}]),e}();t.a=r},function(e,t,n){n(26),n(27),n(36),n(101),n(109),n(111),n(112),e.exports=n(7).Map},function(e,t){},function(e,t,n){var r=n(88)(!0);n(30)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(58),o=n(5),i=n(91),a=n(9),c=n(14),u=n(15),l=n(92),s=n(20),d=n(98),f=n(4)("iterator"),h=!([].keys&&"next"in[].keys()),p="values",v=function(){return this};e.exports=function(e,t,n,m,b,y,g){l(n,t,m);var C,O,j,k=function(e){if(!h&&e in M)return M[e];switch(e){case"keys":case p:return function(){return new n(this,e)}}return function(){return new n(this,e)}},w=t+" Iterator",_=b==p,E=!1,M=e.prototype,A=M[f]||M["@@iterator"]||b&&M[b],P=!h&&A||k(b),L=b?_?k("entries"):P:void 0,R="Array"==t&&M.entries||A;if(R&&(j=d(R.call(new e)))!==Object.prototype&&j.next&&(s(j,w,!0),r||c(j,f)||a(j,f,v)),_&&A&&A.name!==p&&(E=!0,P=function(){return A.call(this)}),r&&!g||!h&&!E&&M[f]||a(M,f,P),u[t]=P,u[w]=v,b)if(C={values:_?P:k(p),keys:y?P:k("keys"),entries:L},g)for(O in C)O in M||i(M,O,C[O]);else o(o.P+o.F*(h||E),t,C);return C}},function(e,t,n){var r=n(6),o=n(3).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(61),o=n(29);e.exports=function(e){return r(o(e))}},function(e,t,n){var r=n(28),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(62)("keys"),o=n(35);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){n(99);for(var r=n(3),o=n(9),i=n(15),a=n(4)("toStringTag"),c="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<c.length;u++){var l=c[u],s=r[l],d=s&&s.prototype;d&&!d[a]&&o(d,a,l),i[l]=i.Array}},function(e,t,n){var r=n(9);e.exports=function(e,t,n){for(var o in t)n&&e[o]?e[o]=t[o]:r(e,o,t[o]);return e}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(16),o=n(4)("toStringTag"),i="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:i?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var r=n(6);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){n(26),n(27),n(36),n(120),n(124),n(125),e.exports=n(7).Promise},function(e,t,n){var r=n(13);e.exports.f=function(e){return new function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=r(t),this.reject=r(n)}(e)}},function(e,t,n){var r=n(1),o=n(0),a=function(){function e(){l(this,e),this.id=r.v}return i(e,[{key:"init",value:function(e,t){Object(o.a)("ValueChangedCommand.init()"),Object(o.b)(e,"attributeId"),this.attributeId=e,this.newValue=t}}]),e}();t.a=a},function(e,t,n){var r=n(1),o=n(0),a=function(){function e(){l(this,e),this.id=r.b}return i(e,[{key:"init",value:function(e,t,n){Object(o.a)("AttributeMetadataChangedCommand.init()"),Object(o.b)(e,"attributeId"),Object(o.b)(t,"metadataName"),this.attributeId=e,this.metadataName=t,this.value=n}}]),e}();t.a=a},function(e,t,n){var r=n(1),o=n(0),a=function(){function e(){l(this,e),this.id=r.c}return i(e,[{key:"init",value:function(e,t,n){Object(o.a)("CreateControllerCommand.init()"),Object(o.b)(e,"controllerid"),Object(o.b)(t,"actionName"),this.controllerid=e,this.actionName=t,this.params=n}}]),e}();t.a=a},function(e,t,n){var r=n(1),o=n(0),a=function(){function e(){l(this,e),this.id=r.d}return i(e,[{key:"init",value:function(e,t,n){Object(o.a)("ChangeAttributeMetadataCommand.init()"),Object(o.b)(e,"attributeId"),Object(o.b)(t,"metadataName"),this.attributeId=e,this.metadataName=t,this.value=n}}]),e}();t.a=a},function(e,t,n){var r=n(1);t.a=function e(){l(this,e),this.id=r.f}},function(e,t,n){var r=n(1),o=n(0),a=function(){function e(){l(this,e),this.id=r.g}return i(e,[{key:"init",value:function(e,t){Object(o.a)("CreateControllerCommand.init()"),Object(o.b)(e,"controllerName"),this.controllerName=e,this.parentControllerId=t}}]),e}();t.a=a},function(e,t,n){var r=n(1),o=n(0),a=function(){function e(){l(this,e),this.id=r.h}return i(e,[{key:"init",value:function(e){Object(o.a)("CreatePresentationModelCommand.init()"),Object(o.b)(e,"presentationModel"),this.attributes=[],this.clientSideOnly=!1,this.pmId=e.id,this.pmType=e.presentationModelType;var t=this;e.getAttributes().forEach(function(e){t.attributes.push({propertyName:e.propertyName,id:e.id,value:e.getValue()})})}}]),e}();t.a=a},function(e,t,n){var r=n(1),o=n(0),a=function(){function e(){l(this,e),this.id=r.i}return i(e,[{key:"init",value:function(e){Object(o.a)("DeletePresentationModelCommand.init()"),Object(o.b)(e,"pmId"),this.pmId=e}}]),e}();t.a=a},function(e,t,n){var r=n(1);t.a=function e(){l(this,e),this.id=r.j}},function(e,t,n){var r=n(1),o=n(0),a=function(){function e(){l(this,e),this.id=r.k}return i(e,[{key:"init",value:function(e){Object(o.a)("DestroyControllerCommand.init()"),Object(o.b)(e,"controllerId"),this.controllerId=e}}]),e}();t.a=a},function(e,t,n){var r=n(1);t.a=function e(){l(this,e),this.id=r.m}},function(e,t,n){var r=n(1),o=n(0),a=function(){function e(){l(this,e),this.id=r.s}return i(e,[{key:"init",value:function(e){Object(o.a)("PresentationModelDeletedCommand.init()"),Object(o.b)(e,"pmId"),this.pmId=e}}]),e}();t.a=a},function(e,t,n){var r=n(1);t.a=function e(){l(this,e),this.id=r.t}},function(e,t,n){var r=n(24),o=0,a=function(){function e(t,n){l(this,e),this.id=t,this.presentationModelType=n,this.attributes=[],this.clientSideOnly=!1,this.dirty=!1,this.id=void 0!==t&&null!=t?t:(o++).toString(),this.invalidBus=new r.a,this.dirtyValueChangeBus=new r.a}return i(e,[{key:"copy",value:function(){var t=new e(null,this.presentationModelType);return t.clientSideOnly=!0,this.getAttributes().forEach(function(e){var n=e.copy();t.addAttribute(n)}),t}},{key:"addAttributes",value:function(e){var t=this;!e||e.length<1||e.forEach(function(e){t.addAttribute(e)})}},{key:"addAttribute",value:function(e){var t=this;if(e&&!(this.attributes.indexOf(e)>-1)){if(this.findAttributeByPropertyName(e.propertyName))throw new Error("There already is an attribute with property name: "+e.propertyName+" in presentation model with id: "+this.id);if(e.getQualifier()&&this.findAttributeByQualifier(e.getQualifier()))throw new Error("There already is an attribute with qualifier: "+e.getQualifier()+" in presentation model with id: "+this.id);e.setPresentationModel(this),this.attributes.push(e),e.onValueChange(function(){t.invalidBus.trigger({source:t})})}}},{key:"onInvalidated",value:function(e){this.invalidBus.onEvent(e)}},{key:"getAttributes",value:function(){return this.attributes.slice(0)}},{key:"getAt",value:function(e){return this.findAttributeByPropertyName(e)}},{key:"findAllAttributesByPropertyName",value:function(e){var t=[];return e?(this.attributes.forEach(function(n){n.propertyName==e&&t.push(n)}),t):null}},{key:"findAttributeByPropertyName",value:function(e){if(!e)return null;for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].propertyName==e)return this.attributes[t];return null}},{key:"findAttributeByQualifier",value:function(e){if(!e)return null;for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].getQualifier()==e)return this.attributes[t];return null}},{key:"findAttributeById",value:function(e){if(!e)return null;for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].id==e)return this.attributes[t];return null}},{key:"syncWith",value:function(e){this.attributes.forEach(function(t){var n=e.getAt(t.propertyName);n&&t.syncWith(n)})}}]),e}();t.a=a},function(e,t,n){n.d(t,"a",function(){return r});var r={NONE:{name:"NONE",text:"[NONE ]",level:0},ALL:{name:"ALL",text:"[ALL  ]",level:100},TRACE:{name:"TRACE",text:"[TRACE]",level:5},DEBUG:{name:"DEBUG",text:"[DEBUG]",level:4},INFO:{name:"INFO",text:"[INFO ]",level:3},WARN:{name:"WARN",text:"[WARN ]",level:2},ERROR:{name:"ERROR",text:"[ERROR]",level:1}}},function(e,t){e.exports=!0},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(11),o=n(93),i=n(63),a=n(34)("IE_PROTO"),c=function(){},u="prototype",l=function(){var e,t=n(31)("iframe"),r=i.length;for(t.style.display="none",n(64).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l[u][i[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(c[u]=r(e),n=new c,c[u]=null,n[a]=e):n=l(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(16);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(3),o="__core-js_shared__",i=r[o]||(r[o]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(3).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(29);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r=n(10).f,o=n(60),i=n(37),a=n(8),c=n(38),u=n(17),l=n(30),s=n(66),d=n(68),f=n(12),h=n(69).fastKey,p=n(40),v=f?"_s":"size",m=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,l){var s=e(function(e,r){c(e,s,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[v]=0,null!=r&&u(r,n,e[l],e)});return i(s.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var n=p(this,t),r=m(n,e);if(r){var o=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=o),o&&(o.p=i),n._f==r&&(n._f=o),n._l==r&&(n._l=i),n[v]--}return!!r},forEach:function(e){p(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!m(p(this,t),e)}}),f&&r(s.prototype,"size",{get:function(){return p(this,t)[v]}}),s},def:function(e,t,n){var r,o,i=m(e,t);return i?i.v=n:(e._l=i={i:o=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=i),r&&(r.n=i),e[v]++,"F"!==o&&(e._i[o]=i)),e},getEntry:m,setStrong:function(e,t,n){l(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?s(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,s(1))},n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){var r=n(3),o=n(7),i=n(10),a=n(12),c=n(4)("species");e.exports=function(e){var t="function"==typeof o[e]?o[e]:r[e];a&&t&&!t[c]&&i.f(t,c,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(35)("meta"),o=n(6),i=n(14),c=n(10).f,u=0,l=Object.isExtensible||function(){return!0},s=!n(19)(function(){return l(Object.preventExtensions({}))}),d=function(e){c(e,r,{value:{i:"O"+ ++u,w:{}}})},f=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==(void 0===e?"undefined":a(e))?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!l(e))return"F";if(!t)return"E";d(e)}return e[r].i},getWeak:function(e,t){if(!i(e,r)){if(!l(e))return!0;if(!t)return!1;d(e)}return e[r].w},onFreeze:function(e){return s&&f.NEED&&l(e)&&!i(e,r)&&d(e),e}}},function(e,t,n){var r=n(3),o=n(5),i=n(69),a=n(19),c=n(9),u=n(37),l=n(17),s=n(38),d=n(6),f=n(20),h=n(10).f,p=n(105)(0),v=n(12);e.exports=function(e,t,n,m,b,y){var g=r[e],C=g,O=b?"set":"add",j=C&&C.prototype,k={};return v&&"function"==typeof C&&(y||j.forEach&&!a(function(){(new C).entries().next()}))?(C=t(function(t,n){s(t,C,e,"_c"),t._c=new g,null!=n&&l(n,b,t[O],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in j&&(!y||"clear"!=e)&&c(C.prototype,e,function(n,r){if(s(this,C,e),!t&&y&&!d(n))return"get"==e&&void 0;var o=this._c[e](0===n?0:n,r);return t?this:o})}),y||h(C.prototype,"size",{get:function(){return this._c.size}})):(C=m.getConstructor(t,e,b,O),u(C.prototype,n),i.NEED=!0),f(C,e),k[e]=C,o(o.G+o.W+o.F,k),y||m.setStrong(C,e,b),C}},function(e,t,n){var r=n(39),o=n(110);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return o(this)}}},function(e,t,n){var r=n(5);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){var r=n(5),o=n(13),i=n(8),a=n(17);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,c,u=arguments[1];return o(this),(t=void 0!==u)&&o(u),null==e?new this:(n=[],t?(r=0,c=i(u,arguments[2],2),a(e,!1,function(e){n.push(c(e,r++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){var r=n(11),o=n(13),i=n(4)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[i])?t:o(n)}},function(e,t,n){var r,o,i,a=n(8),c=n(121),u=n(64),l=n(31),s=n(3),d=s.process,f=s.setImmediate,h=s.clearImmediate,p=s.MessageChannel,v=s.Dispatch,m=0,b={},y="onreadystatechange",g=function(){var e=+this;if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},C=function(e){g.call(e.data)};f&&h||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return b[++m]=function(){c("function"==typeof e?e:Function(e),t)},r(m),m},h=function(e){delete b[e]},"process"==n(16)(d)?r=function(e){d.nextTick(a(g,e,1))}:v&&v.now?r=function(e){v.now(a(g,e,1))}:p?(i=(o=new p).port2,o.port1.onmessage=C,r=a(i.postMessage,i,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(r=function(e){s.postMessage(e+"","*")},s.addEventListener("message",C,!1)):r=y in l("script")?function(e){u.appendChild(l("script"))[y]=function(){u.removeChild(this),g.call(e)}}:function(e){setTimeout(a(g,e,1),0)}),e.exports={set:f,clear:h}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(11),o=n(6),i=n(42);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){n(26),n(27),n(36),n(129),n(130),n(131),n(132),e.exports=n(7).Set},function(e,t){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){var n=this;function r(){n.off(e,r),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(81),o=n(2);n.d(t,"createClientContext",function(){return r.b}),n.d(t,"ClientContextFactory",function(){return r.a}),n.d(t,"LoggerFactory",function(){return o.b}),n.d(t,"LogLevel",function(){return o.a})},function(e,t,n){n.d(t,"b",function(){return v}),n.d(t,"a",function(){return p});var r=n(82),o=n(0),a=n(2),c=n(22),u=n(126),s=n(127),d=n(128),f=n(134),h=n(135),p=function(){function e(){l(this,e)}return i(e,[{key:"create",value:function(t,n){Object(o.a)("connect(url, config)"),Object(o.b)(t,"url"),e.LOGGER.info("Dolphin Platform Version:","0.18.0"),e.LOGGER.debug("Creating client context",t,n);var i=Object(r.a)().url(t).reset(!1).slackMS(4).supportCORS(!0).maxBatchSize(Number.MAX_SAFE_INTEGER);Object(o.c)(n)&&(Object(o.c)(n.errorHandler)&&i.errorHandler(n.errorHandler),Object(o.c)(n.headersInfo)&&Object.keys(n.headersInfo).length>0&&i.headersInfo(n.headersInfo));var a=i.build(),l=new h.a(t,n);l.on("error",function(e){y.emit("error",e)}),a.clientConnector.transmitter=l;var p=new s.a(a),v=new u.a(p),m=new c.d(t,a,p,n),b=new d.a(a,p,m),y=new f.a(a,v,b,m);return e.LOGGER.debug("clientContext created with",y),y}}]),e}();p.LOGGER=a.b.getLogger("ClientContextFactory");var v=(new p).create},function(e,t,n){t.a=o;var r=n(83);function o(){return new r.a}},function(e,t,n){var r=n(84),o=n(114),a=n(116),c=n(118),u=n(119),s=n(2),d=function(){function e(){l(this,e),this.reset_=!1,this.slackMS_=300,this.maxBatchSize_=50,this.supportCORS_=!1}return i(e,[{key:"url",value:function(e){return this.url_=e,this}},{key:"reset",value:function(e){return this.reset_=e,this}},{key:"slackMS",value:function(e){return this.slackMS_=e,this}},{key:"maxBatchSize",value:function(e){return this.maxBatchSize_=e,this}},{key:"supportCORS",value:function(e){return this.supportCORS_=e,this}},{key:"errorHandler",value:function(e){return this.errorHandler_=e,this}},{key:"headersInfo",value:function(e){return this.headersInfo_=e,this}},{key:"build",value:function(){var t=new o.a,n=void 0;return n=null!=this.url_&&this.url_.length>0?new c.a(this.url_,this.reset_,"UTF-8",this.errorHandler_,this.supportCORS_,this.headersInfo_):new u.a,t.setClientConnector(new r.a(n,t,this.slackMS_,this.maxBatchSize_)),t.setClientModelStore(new a.a(t)),e.LOGGER.debug("ClientDolphin initialized",t,n),t}}]),e}();t.a=d,d.LOGGER=s.b.getLogger("DolphinBuilder")},function(e,t,n){var r=n(85),o=n(23),a=n(56),c=n(2),u=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50;l(this,e),this.commandQueue=[],this.currentlySending=!1,this.pushEnabled=!1,this.waiting=!1,this.transmitter=t,this.clientDolphin=n,this.slackMS=i,this.codec=new o.a,this.commandBatcher=new r.a(!0,a)}return i(e,[{key:"setCommandBatcher",value:function(e){this.commandBatcher=e}},{key:"setPushEnabled",value:function(e){this.pushEnabled=e}},{key:"setPushListener",value:function(e){this.pushListener=e}},{key:"setReleaseCommand",value:function(e){this.releaseCommand=e}},{key:"send",value:function(e,t){this.commandQueue.push({command:e,handler:t}),this.currentlySending?this.release():this.doSendNext()}},{key:"doSendNext",value:function(){var e=this;if(this.commandQueue.length<1){if(!this.pushEnabled)return void(this.currentlySending=!1);this.enqueuePushCommand()}this.currentlySending=!0;var t=this.commandBatcher.batch(this.commandQueue);if(t.length>0){var n=t[t.length-1].handler,r=t.map(function(e){return e.command});this.transmitter.transmit(r,function(t){var r=[];t.forEach(function(t){var n=e.handle(t);n&&r.push(n)}),n&&n.onFinished(r),setTimeout(function(){return e.doSendNext()},e.slackMS)})}else setTimeout(function(){return e.doSendNext()},this.slackMS)}},{key:"handle",value:function(t){return"DeletePresentationModel"===t.id?this.handleDeletePresentationModelCommand(t):"CreatePresentationModel"===t.id?this.handleCreatePresentationModelCommand(t):"ValueChanged"===t.id?this.handleValueChangedCommand(t):"AttributeMetadataChanged"===t.id?this.handleAttributeMetadataChangedCommand(t):(e.LOGGER.error("Cannot handle, unknown command "+t),null)}},{key:"handleDeletePresentationModelCommand",value:function(e){var t=this.clientDolphin.findPresentationModelById(e.pmId);return t?(this.clientDolphin.getClientModelStore().deletePresentationModel(t,!0),t):null}},{key:"handleCreatePresentationModelCommand",value:function(e){var t=this;if(this.clientDolphin.getClientModelStore().containsPresentationModel(e.pmId))throw new Error("There already is a presentation model with id "+e.pmId+"  known to the client.");var n=[];e.attributes.forEach(function(e){var r=t.clientDolphin.attribute(e.propertyName,e.qualifier,e.value);e.id&&e.id.match(".*S$")&&(r.id=e.id),n.push(r)});var r=new a.a(e.pmId,e.pmType);return r.addAttributes(n),e.clientSideOnly&&(r.clientSideOnly=!0),this.clientDolphin.getClientModelStore().add(r,!1),this.clientDolphin.updatePresentationModelQualifier(r),r}},{key:"handleValueChangedCommand",value:function(t){var n=this.clientDolphin.getClientModelStore().findAttributeById(t.attributeId);return n?n.getValue()===t.newValue?null:(n.setValueFromServer(t.newValue),null):(e.LOGGER.error("attribute with id "+t.attributeId+" not found, cannot update to new value "+t.newValue),null)}},{key:"handleAttributeMetadataChangedCommand",value:function(e){var t=this.clientDolphin.getClientModelStore().findAttributeById(e.attributeId);return t?(t[e.metadataName]=e.value,null):null}},{key:"listen",value:function(){this.pushEnabled&&(this.waiting||this.currentlySending||this.doSendNext())}},{key:"enqueuePushCommand",value:function(){var e=this;this.waiting=!0,this.commandQueue.push({command:this.pushListener,handler:{onFinished:function(){e.waiting=!1},onFinishedData:null}})}},{key:"release",value:function(){this.waiting&&(this.waiting=!1,this.transmitter.signal(this.releaseCommand))}}]),e}();t.a=u,u.LOGGER=c.b.getLogger("ClientConnector")},function(e,t,n){var r=n(1),o=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;l(this,e),this.folding=t,this.maxBatchSize=n}return i(e,[{key:"batch",value:function(e){for(var t=[],n=0;e[n]&&n<=this.maxBatchSize;){var o=e[n];if(n++,this.folding?o.command.id==r.v&&t.length>0&&t[t.length-1].command.id==r.v&&o.command.attributeId==t[t.length-1].command.attributeId?t[t.length-1].command.newValue=o.command.newValue:o.command.id==r.s||t.push(o):t.push(o),o.handler)break}return e.splice(0,n),t}}]),e}();t.a=o},function(e,t,n){var r=function(e){function t(e){return l(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return u(t,Error),t}();t.a=r},function(e,t,n){n.d(t,"a",function(){return d});var r=n(25),o=n.n(r),a=n(0),c=n(113),u=new c.a("ROOT"),s={loggers:new o.a},d=function(){function e(){l(this,e)}return i(e,null,[{key:"getLogger",value:function(e){if(!Object(a.c)(e)||"ROOT"===e)return u;var t=s.loggers.get(e);if(t)return t;var n=new c.a(e,u);return s.loggers.set(e,n),n}}]),e}()},function(e,t,n){var r=n(28),o=n(29);e.exports=function(e){return function(t,n){var i,a,c=String(o(t)),u=r(n),l=c.length;return u<0||u>=l?e?"":void 0:(i=c.charCodeAt(u))<55296||i>56319||u+1===l||(a=c.charCodeAt(u+1))<56320||a>57343?e?c.charAt(u):i:e?c.slice(u,u+2):a-56320+(i-55296<<10)+65536}}},function(e,t,n){e.exports=!n(12)&&!n(19)(function(){return 7!=Object.defineProperty(n(31)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(6);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){e.exports=n(9)},function(e,t,n){var r=n(60),o=n(59),i=n(20),a={};n(9)(a,n(4)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t,n){var r=n(10),o=n(11),i=n(94);e.exports=n(12)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),c=a.length,u=0;c>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(95),o=n(63);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(14),o=n(32),i=n(96)(!1),a=n(34)("IE_PROTO");e.exports=function(e,t){var n,c=o(e),u=0,l=[];for(n in c)n!=a&&r(c,n)&&l.push(n);for(;t.length>u;)r(c,n=t[u++])&&(~i(l,n)||l.push(n));return l}},function(e,t,n){var r=n(32),o=n(33),i=n(97);e.exports=function(e){return function(t,n,a){var c,u=r(t),l=o(u.length),s=i(a,l);if(e&&n!=n){for(;l>s;)if((c=u[s++])!=c)return!0}else for(;l>s;s++)if((e||s in u)&&u[s]===n)return e||s||0;return!e&&-1}}},function(e,t,n){var r=n(28),o=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(14),o=n(65),i=n(34)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(100),o=n(66),i=n(15),a=n(32);e.exports=n(30)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(67),o=n(40);e.exports=n(70)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(o(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(o(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){var r=n(11);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},function(e,t,n){var r=n(15),o=n(4)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},function(e,t,n){var r=n(39),o=n(4)("iterator"),i=n(15);e.exports=n(7).getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){var r=n(8),o=n(61),i=n(65),a=n(33),c=n(106);e.exports=function(e,t){var n=1==e,u=2==e,l=3==e,s=4==e,d=6==e,f=5==e||d,h=t||c;return function(t,c,p){for(var v,m,b=i(t),y=o(b),g=r(c,p,3),C=a(y.length),O=0,j=n?h(t,C):u?h(t,0):void 0;C>O;O++)if((f||O in y)&&(m=g(v=y[O],O,b),e))if(n)j[O]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return O;case 2:j.push(v)}else if(s)return!1;return d?-1:l||s?s:j}}},function(e,t,n){var r=n(107);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(6),o=n(108),i=n(4)("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(16);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(5);r(r.P+r.R,"Map",{toJSON:n(71)("Map")})},function(e,t,n){var r=n(17);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){n(72)("Map")},function(e,t,n){n(73)("Map")},function(e,t,n){n.d(t,"a",function(){return c});var r=n(0),o=n(57),a={pad:function(e,t){for(var n=""+e;n.length<t;)n="0"+n;return n},internalLog:function(){var e=Array.from(arguments),t=e.shift(),n=e.shift(),r=e.shift(),o=new Date,i=o.getFullYear()+"-"+a.pad(o.getMonth()+1,2)+"-"+a.pad(o.getDate(),2)+" "+a.pad(o.getHours(),2)+":"+a.pad(o.getMinutes(),2)+":"+a.pad(o.getSeconds(),2)+"."+a.pad(o.getMilliseconds(),3);t.apply(void 0,[i,r.text,n].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e)))},getCookie:function(e){if(Object(r.c)(window)&&Object(r.c)(window.document)&&Object(r.c)(window.document.cookie)){var t=("; "+document.cookie).split("; "+e+"=");if(2===t.length)return t.pop().split(";").shift()}}},c=function(){function e(t,n){switch(l(this,e),this.context=t,this.rootLogger=n,a.getCookie("DOLPHIN_PLATFORM_LOGGER_"+this.context)){case"NONE":this.logLevel=o.a.NONE;break;case"ALL":this.logLevel=o.a.ALL;break;case"TRACE":this.logLevel=o.a.TRACE;break;case"DEBUG":this.logLevel=o.a.DEBUG;break;case"INFO":this.logLevel=o.a.INFO;break;case"WARN":this.logLevel=o.a.WARN;break;case"ERROR":this.logLevel=o.a.ERROR}}return i(e,[{key:"trace",value:function(){Object(r.c)(console)&&this.isLogLevel(o.a.TRACE)&&a.internalLog.apply(a,[console.log,this.context,o.a.TRACE].concat(Array.prototype.slice.call(arguments)))}},{key:"debug",value:function(){Object(r.c)(console)&&this.isLogLevel(o.a.DEBUG)&&a.internalLog.apply(a,[console.log,this.context,o.a.DEBUG].concat(Array.prototype.slice.call(arguments)))}},{key:"info",value:function(){Object(r.c)(console)&&this.isLogLevel(o.a.INFO)&&a.internalLog.apply(a,[console.log,this.context,o.a.INFO].concat(Array.prototype.slice.call(arguments)))}},{key:"warn",value:function(){Object(r.c)(console)&&this.isLogLevel(o.a.WARN)&&a.internalLog.apply(a,[console.warn,this.context,o.a.WARN].concat(Array.prototype.slice.call(arguments)))}},{key:"error",value:function(){Object(r.c)(console)&&this.isLogLevel(o.a.ERROR)&&a.internalLog.apply(a,[console.error,this.context,o.a.ERROR].concat(Array.prototype.slice.call(arguments)))}},{key:"getLogLevel",value:function(){return Object(r.c)(this.logLevel)?this.logLevel:Object(r.c)(this.rootLogger)?this.rootLogger.getLogLevel():o.a.INFO}},{key:"setLogLevel",value:function(e){this.logLevel=e}},{key:"setLogLevelByName",value:function(e){Object(r.c)(o.a[e])&&(this.logLevel=o.a[e])}},{key:"isLogLevel",value:function(e){return this.getLogLevel()!==o.a.NONE&&(this.getLogLevel()===o.a.ALL||(this.getLogLevel()===o.a.TRACE||(this.getLogLevel()===o.a.DEBUG&&e!==o.a.TRACE||(this.getLogLevel()===o.a.INFO&&e!==o.a.TRACE&&e!==o.a.DEBUG||(this.getLogLevel()===o.a.WARN&&e!==o.a.TRACE&&e!==o.a.DEBUG&&e!==o.a.INFO||this.getLogLevel()===o.a.ERROR&&e!==o.a.TRACE&&e!==o.a.DEBUG&&e!==o.a.INFO&&e!==o.a.WARN)))))}},{key:"isLogLevelUseable",value:function(e){return Object(r.b)(e,"level"),!!e.level&&this.getLogLevel().level>=e.level}}]),e}()},function(e,t,n){var r=n(115),o=n(56),a=function(){function e(){l(this,e)}return i(e,[{key:"setClientConnector",value:function(e){this.clientConnector=e}},{key:"getClientConnector",value:function(){return this.clientConnector}},{key:"send",value:function(e,t){this.clientConnector.send(e,t)}},{key:"attribute",value:function(e,t,n){return new r.a(e,t,n)}},{key:"presentationModel",value:function(e,t){for(var n=new o.a(e,t),r=arguments.length,i=Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];return i&&i.length>0&&i.forEach(function(e){n.addAttribute(e)}),this.getClientModelStore().add(n,!0),n}},{key:"setClientModelStore",value:function(e){this.clientModelStore=e}},{key:"getClientModelStore",value:function(){return this.clientModelStore}},{key:"listPresentationModelIds",value:function(){return this.getClientModelStore().listPresentationModelIds()}},{key:"listPresentationModels",value:function(){return this.getClientModelStore().listPresentationModels()}},{key:"findAllPresentationModelByType",value:function(e){return this.getClientModelStore().findAllPresentationModelByType(e)}},{key:"getAt",value:function(e){return this.findPresentationModelById(e)}},{key:"findPresentationModelById",value:function(e){return this.getClientModelStore().findPresentationModelById(e)}},{key:"deletePresentationModel",value:function(e){this.getClientModelStore().deletePresentationModel(e,!0)}},{key:"updatePresentationModelQualifier",value:function(e){var t=this;e.getAttributes().forEach(function(e){t.updateAttributeQualifier(e)})}},{key:"updateAttributeQualifier",value:function(e){e.getQualifier()&&this.getClientModelStore().findAllAttributesByQualifier(e.getQualifier()).forEach(function(t){t.setValue(e.getValue())})}},{key:"startPushListening",value:function(e,t){var n=this;this.clientConnector.setPushListener(e),this.clientConnector.setReleaseCommand(t),this.clientConnector.setPushEnabled(!0),setTimeout(function(){n.clientConnector.listen()},0)}},{key:"stopPushListening",value:function(){this.clientConnector.setPushEnabled(!1)}}]),e}();t.a=a},function(e,t,n){var r=n(24),o=n(2),c=function(){function e(t,n,o){l(this,e),this.propertyName=t,this.id=e.clientAttributeInstanceCount+++"C",this.valueChangeBus=new r.a,this.qualifierChangeBus=new r.a,this.setValue(o),this.setQualifier(n)}return i(e,[{key:"copy",value:function(){return new e(this.propertyName,this.getQualifier(),this.getValue())}},{key:"setPresentationModel",value:function(e){if(this.presentationModel)throw new Error("You can not set a presentation model for an attribute that is already bound.");this.presentationModel=e}},{key:"getPresentationModel",value:function(){return this.presentationModel}},{key:"getValue",value:function(){return this.value}},{key:"setValueFromServer",value:function(t){var n=e.checkValue(t);if(this.value!==n){var r=this.value;this.value=n,this.valueChangeBus.trigger({oldValue:r,newValue:n,sendToServer:!1})}}},{key:"setValue",value:function(t){var n=e.checkValue(t);if(this.value!==n){var r=this.value;this.value=n,this.valueChangeBus.trigger({oldValue:r,newValue:n,sendToServer:!0})}}},{key:"setQualifier",value:function(e){if(this.qualifier!==e){var t=this.qualifier;this.qualifier=e,this.qualifierChangeBus.trigger({oldValue:t,newValue:e}),this.valueChangeBus.trigger({oldValue:this.value,newValue:this.value,sendToServer:!1})}}},{key:"getQualifier",value:function(){return this.qualifier}},{key:"onValueChange",value:function(e){this.valueChangeBus.onEvent(e),e({oldValue:this.value,newValue:this.value,sendToServer:!1})}},{key:"onQualifierChange",value:function(e){this.qualifierChangeBus.onEvent(e)}},{key:"syncWith",value:function(e){e&&(this.setQualifier(e.getQualifier()),this.setValue(e.value))}}],[{key:"checkValue",value:function(t){if(null==t||void 0===t)return null;var n=t;(n instanceof String||n instanceof Boolean||n instanceof Number)&&(n=t.valueOf()),n instanceof e&&(e.LOGGER.warn("An Attribute may not itself contain an attribute as a value. Assuming you forgot to call value."),n=this.checkValue(t.value));var r=!1;if((this.SUPPORTED_VALUE_TYPES.indexOf(void 0===n?"undefined":a(n))>-1||n instanceof Date)&&(r=!0),!r)throw new Error("Attribute values of this type are not allowed: "+(void 0===t?"undefined":a(t)));return n}}]),e}();t.a=c,c.LOGGER=o.b.getLogger("ClientAttribute"),c.SUPPORTED_VALUE_TYPES=["string","number","boolean"],c.clientAttributeInstanceCount=0},function(e,t,n){var r=n(117),o=n(24),a=n(21),c=n(18),u=n(2),s=function(){function e(t){l(this,e),this.clientDolphin=t,this.presentationModels=new Map,this.presentationModelsPerType=new Map,this.attributesPerId=new Map,this.attributesPerQualifier=new Map,this.modelStoreChangeBus=new o.a}return i(e,[{key:"getClientDolphin",value:function(){return this.clientDolphin}},{key:"registerAttribute",value:function(e){var t=this;this.addAttributeById(e),e.getQualifier()&&this.addAttributeByQualifier(e),e.onValueChange(function(n){if(n.newValue!==n.oldValue&&!0===n.sendToServer){var r=a.a.createValueChangedCommand(e.id,n.newValue);t.clientDolphin.getClientConnector().send(r,null)}e.getQualifier()&&t.findAttributesByFilter(function(t){return t!==e&&t.getQualifier()===e.getQualifier()}).forEach(function(t){t.setValue(e.getValue())})}),e.onQualifierChange(function(n){t.clientDolphin.getClientConnector().send(a.a.createChangeAttributeMetadataCommand(e.id,r.a.QUALIFIER_PROPERTY,n.newValue),null)})}},{key:"add",value:function(t){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)return!1;this.presentationModels.has(t.id)&&e.LOGGER.error("There already is a PM with id "+t.id);var o=!1;if(!this.presentationModels.has(t.id)){if(this.presentationModels.set(t.id,t),this.addPresentationModelByType(t),r)this.clientDolphin.getClientConnector().send(a.a.createCreatePresentationModelCommand(t),null);t.getAttributes().forEach(function(e){n.registerAttribute(e)}),this.modelStoreChangeBus.trigger({eventType:c.a,clientPresentationModel:t}),o=!0}return o}},{key:"remove",value:function(e){var t=this;if(!e)return!1;var n=!1;return this.presentationModels.has(e.id)&&(this.removePresentationModelByType(e),this.presentationModels.delete(e.id),e.getAttributes().forEach(function(e){t.removeAttributeById(e),e.getQualifier()&&t.removeAttributeByQualifier(e)}),this.modelStoreChangeBus.trigger({eventType:c.o,clientPresentationModel:e}),n=!0),n}},{key:"findAttributesByFilter",value:function(e){var t=[];return this.presentationModels.forEach(function(n){n.getAttributes().forEach(function(n){e(n)&&t.push(n)})}),t}},{key:"addPresentationModelByType",value:function(e){if(e){var t=e.presentationModelType;if(t){var n=this.presentationModelsPerType.get(t);n||(n=[],this.presentationModelsPerType.set(t,n)),n.indexOf(e)>-1||n.push(e)}}}},{key:"removePresentationModelByType",value:function(e){if(e&&e.presentationModelType){var t=this.presentationModelsPerType.get(e.presentationModelType);t&&(t.length>-1&&t.splice(t.indexOf(e),1),0===t.length&&this.presentationModelsPerType.delete(e.presentationModelType))}}},{key:"listPresentationModelIds",value:function(){for(var e=[],t=this.presentationModels.keys(),n=t.next();!n.done;)e.push(n.value),n=t.next();return e}},{key:"listPresentationModels",value:function(){for(var e=[],t=this.presentationModels.values(),n=t.next();!n.done;)e.push(n.value),n=t.next();return e}},{key:"findPresentationModelById",value:function(e){return this.presentationModels.get(e)}},{key:"findAllPresentationModelByType",value:function(e){return e&&this.presentationModelsPerType.has(e)?this.presentationModelsPerType.get(e).slice(0):[]}},{key:"deletePresentationModel",value:function(e,t){if(e&&this.containsPresentationModel(e.id)){if(this.remove(e),!t||e.clientSideOnly)return;this.clientDolphin.getClientConnector().send(a.a.createPresentationModelDeletedCommand(e.id),null)}}},{key:"containsPresentationModel",value:function(e){return this.presentationModels.has(e)}},{key:"addAttributeById",value:function(e){e&&!this.attributesPerId.has(e.id)&&this.attributesPerId.set(e.id,e)}},{key:"removeAttributeById",value:function(e){e&&this.attributesPerId.has(e.id)&&this.attributesPerId.delete(e.id)}},{key:"findAttributeById",value:function(e){return this.attributesPerId.get(e)}},{key:"addAttributeByQualifier",value:function(e){if(e&&e.getQualifier()){var t=this.attributesPerQualifier.get(e.getQualifier());t||(t=[],this.attributesPerQualifier.set(e.getQualifier(),t)),t.indexOf(e)>-1||t.push(e)}}},{key:"removeAttributeByQualifier",value:function(e){if(e&&e.getQualifier()){var t=this.attributesPerQualifier.get(e.getQualifier());t&&(t.length>-1&&t.splice(t.indexOf(e),1),0===t.length&&this.attributesPerQualifier.delete(e.getQualifier()))}}},{key:"findAllAttributesByQualifier",value:function(e){return e&&this.attributesPerQualifier.has(e)?this.attributesPerQualifier.get(e).slice(0):[]}},{key:"onModelStoreChange",value:function(e){this.modelStoreChangeBus.onEvent(e)}},{key:"onModelStoreChangeForType",value:function(e,t){this.modelStoreChangeBus.onEvent(function(n){n.clientPresentationModel.presentationModelType==e&&t(n)})}}]),e}();t.a=s,s.LOGGER=u.b.getLogger("ClientModelStore")},function(e,t,n){var r=function e(){l(this,e)};t.a=r,r.QUALIFIER_PROPERTY="qualifier",r.VALUE="value"},function(e,t,n){var r=n(23),o=n(2),a=function(){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"UTF-8",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;l(this,e),this.url=t,this.charset=o,this.HttpCodes={finished:4,success:200},this.errorHandler=i,this.supportCORS=a,this.headersInfo=c,this.http=new XMLHttpRequest,this.sig=new XMLHttpRequest,this.supportCORS&&"withCredentials"in this.http&&(this.http.withCredentials=!0,this.sig.withCredentials=!0),this.codec=new r.a,n&&(e.LOGGER.error("HttpTransmitter.invalidate() is deprecated. Use ClientDolphin.reset(OnSuccessHandler) instead"),this.invalidate())}return i(e,[{key:"transmit",value:function(t,n){var r=this;this.http.onerror=function(){r.handleError("onerror",""),n([])},this.http.onreadystatechange=function(){if(r.http.readyState===r.HttpCodes.finished)if(r.http.status===r.HttpCodes.success){var t=r.http.responseText;if(t.trim().length>0)try{var o=r.codec.decode(t);n(o)}catch(o){e.LOGGER.error("Error occurred parsing responseText: ",o,t),r.handleError("application","HttpTransmitter: Incorrect responseText: "+t),n([])}else r.handleError("application","HttpTransmitter: empty responseText"),n([])}else r.handleError("application","HttpTransmitter: HTTP Status != 200"),n([])},this.http.open("POST",this.url,!0),this.setHeaders(this.http),"overrideMimeType"in this.http&&this.http.overrideMimeType("application/json; charset="+this.charset);var o=this.codec.encode([t]);e.LOGGER.trace("transmitting",t,o),this.http.send(o)}},{key:"setHeaders",value:function(e){if(this.headersInfo)for(var t in this.headersInfo)this.headersInfo.hasOwnProperty(t)&&e.setRequestHeader(t,this.headersInfo[t])}},{key:"handleError",value:function(t,n){var r={kind:t,url:this.url,httpStatus:this.http.status,message:n};this.errorHandler?this.errorHandler(r):e.LOGGER.error("Error occurred: ",r)}},{key:"signal",value:function(t){this.sig.open("POST",this.url,!0),this.setHeaders(this.sig);var n=this.codec.encode([t]);e.LOGGER.trace("signal",t,n),this.sig.send(n)}},{key:"invalidate",value:function(){this.http.open("POST",this.url+"invalidate?",!1),this.http.send()}}]),e}();t.a=a,a.LOGGER=o.b.getLogger("HttpTransmitter")},function(e,t,n){var r=function(){function e(){l(this,e)}return i(e,[{key:"transmit",value:function(e,t){t([])}},{key:"signal",value:function(){}},{key:"reset",value:function(){}}]),e}();t.a=r},function(e,t,n){var r,o,i,a,c=n(58),u=n(3),l=n(8),s=n(39),d=n(5),f=n(6),h=n(13),p=n(38),v=n(17),m=n(74),b=n(75).set,y=n(122)(),g=n(42),C=n(76),O=n(77),j="Promise",k=u.TypeError,w=u.process,_=u[j],E="process"==s(w),M=function(){},A=o=g.f,P=!!function(){try{var e=_.resolve(1),t=(e.constructor={})[n(4)("species")]=function(e){e(M,M)};return(E||"function"==typeof PromiseRejectionEvent)&&e.then(M)instanceof t}catch(e){}}(),L=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},R=function(e,t){if(!e._n){e._n=!0;var n=e._c;y(function(){for(var r=e._v,o=1==e._s,i=0,a=function(t){var n,i,a=o?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{a?(o||(2==e._h&&T(e),e._h=1),!0===a?n=r:(l&&l.enter(),n=a(r),l&&l.exit()),n===t.promise?u(k("Promise-chain cycle")):(i=L(n))?i.call(n,c,u):c(n)):u(r)}catch(e){u(e)}};n.length>i;)a(n[i++]);e._c=[],e._n=!1,t&&!e._h&&x(e)})}},x=function(e){b.call(u,function(){var t,n,r,o=e._v,i=S(e);if(i&&(t=C(function(){E?w.emit("unhandledRejection",o,e):(n=u.onunhandledrejection)?n({promise:e,reason:o}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=E||S(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},S=function(e){return 1!==e._h&&0===(e._a||e._c).length},T=function(e){b.call(u,function(){var t;E?w.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},I=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),R(t,!0))},D=function e(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw k("Promise can't be resolved itself");(n=L(t))?y(function(){var o={_w:r,_d:!1};try{n.call(t,l(e,o,1),l(I,o,1))}catch(e){I.call(o,e)}}):(r._v=t,r._s=1,R(r,!1))}catch(e){I.call({_w:r,_d:!1},e)}}};P||(_=function(e){p(this,_,j,"_h"),h(e),r.call(this);try{e(l(D,this,1),l(I,this,1))}catch(e){I.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(37)(_.prototype,{then:function(e,t){var n=A(m(this,_));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=E?w.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&R(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r;this.promise=e,this.resolve=l(D,e,1),this.reject=l(I,e,1)},g.f=A=function(e){return e===_||e===a?new i(e):o(e)}),d(d.G+d.W+d.F*!P,{Promise:_}),n(20)(_,j),n(68)(j),a=n(7)[j],d(d.S+d.F*!P,j,{reject:function(e){var t=A(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(c||!P),j,{resolve:function(e){return O(c&&this===a?_:this,e)}}),d(d.S+d.F*!(P&&n(123)(function(e){_.all(e).catch(M)})),j,{all:function(e){var t=this,n=A(t),r=n.resolve,o=n.reject,i=C(function(){var n=[],i=0,a=1;v(e,!1,function(e){var c=i++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[c]=e,--a||r(n))},o)}),--a||r(n)});return i.e&&o(i.v),n.promise},race:function(e){var t=this,n=A(t),r=n.reject,o=C(function(){v(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(3),o=n(75).set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,c=r.Promise,u="process"==n(16)(a);e.exports=function(){var e,t,n,l=function(){var r,o;for(u&&(r=a.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(l)};else if(!i||r.navigator&&r.navigator.standalone)if(c&&c.resolve){var s=c.resolve();n=function(){s.then(l)}}else n=function(){o.call(r,l)};else{var d=!0,f=document.createTextNode("");new i(l).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t,n){var r=n(4)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(e){}return n}},function(e,t,n){var r=n(5),o=n(7),i=n(3),a=n(74),c=n(77);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,o.Promise||i.Promise),n="function"==typeof e;return this.then(n?function(n){return c(t,e()).then(function(){return n})}:e,n?function(n){return c(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){var r=n(5),o=n(42),i=n(76);r(r.S,"Promise",{try:function(e){var t=o.f(this),n=i(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){var r=n(25),o=n.n(r),a=n(0),c=n(2),u=function(){function e(t){l(this,e),Object(a.a)("BeanManager(classRepository)"),Object(a.b)(t,"classRepository"),this.classRepository=t,this.addedHandlers=new o.a,this.removedHandlers=new o.a,this.updatedHandlers=new o.a,this.arrayUpdatedHandlers=new o.a,this.allAddedHandlers=[],this.allRemovedHandlers=[],this.allUpdatedHandlers=[],this.allArrayUpdatedHandlers=[];var n=this;this.classRepository.onBeanAdded(function(t,r){var o=n.addedHandlers.get(t);Object(a.c)(o)&&o.forEach(function(n){try{n(r)}catch(n){e.LOGGER.error("An exception occurred while calling an onBeanAdded-handler for type",t,n)}}),n.allAddedHandlers.forEach(function(t){try{t(r)}catch(t){e.LOGGER.error("An exception occurred while calling a general onBeanAdded-handler",t)}})}),this.classRepository.onBeanRemoved(function(t,r){var o=n.removedHandlers.get(t);Object(a.c)(o)&&o.forEach(function(n){try{n(r)}catch(n){e.LOGGER.error("An exception occurred while calling an onBeanRemoved-handler for type",t,n)}}),n.allRemovedHandlers.forEach(function(t){try{t(r)}catch(t){e.LOGGER.error("An exception occurred while calling a general onBeanRemoved-handler",t)}})}),this.classRepository.onBeanUpdate(function(t,r,o,i,c){var u=n.updatedHandlers.get(t);Object(a.c)(u)&&u.forEach(function(n){try{n(r,o,i,c)}catch(n){e.LOGGER.error("An exception occurred while calling an onBeanUpdate-handler for type",t,n)}}),n.allUpdatedHandlers.forEach(function(t){try{t(r,o,i,c)}catch(t){e.LOGGER.error("An exception occurred while calling a general onBeanUpdate-handler",t)}})}),this.classRepository.onArrayUpdate(function(t,r,o,i,c,u){var l=n.arrayUpdatedHandlers.get(t);Object(a.c)(l)&&l.forEach(function(n){try{n(r,o,i,c,u)}catch(n){e.LOGGER.error("An exception occurred while calling an onArrayUpdate-handler for type",t,n)}}),n.allArrayUpdatedHandlers.forEach(function(t){try{t(r,o,i,c,u)}catch(t){e.LOGGER.error("An exception occurred while calling a general onArrayUpdate-handler",t)}})})}return i(e,[{key:"notifyBeanChange",value:function(e,t,n){return Object(a.a)("BeanManager.notifyBeanChange(bean, propertyName, newValue)"),Object(a.b)(e,"bean"),Object(a.b)(t,"propertyName"),this.classRepository.notifyBeanChange(e,t,n)}},{key:"notifyArrayChange",value:function(e,t,n,r,o){Object(a.a)("BeanManager.notifyArrayChange(bean, propertyName, index, count, removedElements)"),Object(a.b)(e,"bean"),Object(a.b)(t,"propertyName"),Object(a.b)(n,"index"),Object(a.b)(r,"count"),Object(a.b)(o,"removedElements"),this.classRepository.notifyArrayChange(e,t,n,r,o)}},{key:"isManaged",value:function(e){throw Object(a.a)("BeanManager.isManaged(bean)"),Object(a.b)(e,"bean"),new Error("Not implemented yet")}},{key:"create",value:function(e){throw Object(a.a)("BeanManager.create(type)"),Object(a.b)(e,"type"),new Error("Not implemented yet")}},{key:"add",value:function(e,t){throw Object(a.a)("BeanManager.add(type, bean)"),Object(a.b)(e,"type"),Object(a.b)(t,"bean"),new Error("Not implemented yet")}},{key:"addAll",value:function(e,t){throw Object(a.a)("BeanManager.addAll(type, collection)"),Object(a.b)(e,"type"),Object(a.b)(t,"collection"),new Error("Not implemented yet")}},{key:"remove",value:function(e){throw Object(a.a)("BeanManager.remove(bean)"),Object(a.b)(e,"bean"),new Error("Not implemented yet")}},{key:"removeAll",value:function(e){throw Object(a.a)("BeanManager.removeAll(collection)"),Object(a.b)(e,"collection"),new Error("Not implemented yet")}},{key:"removeIf",value:function(e){throw Object(a.a)("BeanManager.removeIf(predicate)"),Object(a.b)(e,"predicate"),new Error("Not implemented yet")}},{key:"onAdded",value:function(e,t){var n=this;if(Object(a.c)(t)){Object(a.a)("BeanManager.onAdded(type, eventHandler)"),Object(a.b)(e,"type"),Object(a.b)(t,"eventHandler");var r=n.addedHandlers.get(e);return Object(a.c)(r)||(r=[]),n.addedHandlers.set(e,r.concat(t)),{unsubscribe:function(){var r=n.addedHandlers.get(e);Object(a.c)(r)&&n.addedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,Object(a.a)("BeanManager.onAdded(eventHandler)"),Object(a.b)(t,"eventHandler"),n.allAddedHandlers=n.allAddedHandlers.concat(t),{unsubscribe:function(){n.allAddedHandlers=n.allAddedHandlers.filter(function(e){return e!==t})}}}},{key:"onRemoved",value:function(e,t){var n=this;if(Object(a.c)(t)){Object(a.a)("BeanManager.onRemoved(type, eventHandler)"),Object(a.b)(e,"type"),Object(a.b)(t,"eventHandler");var r=n.removedHandlers.get(e);return Object(a.c)(r)||(r=[]),n.removedHandlers.set(e,r.concat(t)),{unsubscribe:function(){var r=n.removedHandlers.get(e);Object(a.c)(r)&&n.removedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,Object(a.a)("BeanManager.onRemoved(eventHandler)"),Object(a.b)(t,"eventHandler"),n.allRemovedHandlers=n.allRemovedHandlers.concat(t),{unsubscribe:function(){n.allRemovedHandlers=n.allRemovedHandlers.filter(function(e){return e!==t})}}}},{key:"onBeanUpdate",value:function(e,t){var n=this;if(Object(a.c)(t)){Object(a.a)("BeanManager.onBeanUpdate(type, eventHandler)"),Object(a.b)(e,"type"),Object(a.b)(t,"eventHandler");var r=n.updatedHandlers.get(e);return Object(a.c)(r)||(r=[]),n.updatedHandlers.set(e,r.concat(t)),{unsubscribe:function(){var r=n.updatedHandlers.get(e);Object(a.c)(r)&&n.updatedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,Object(a.a)("BeanManager.onBeanUpdate(eventHandler)"),Object(a.b)(t,"eventHandler"),n.allUpdatedHandlers=n.allUpdatedHandlers.concat(t),{unsubscribe:function(){n.allUpdatedHandlers=n.allUpdatedHandlers.filter(function(e){return e!==t})}}}},{key:"onArrayUpdate",value:function(e,t){var n=this;if(Object(a.c)(t)){Object(a.a)("BeanManager.onArrayUpdate(type, eventHandler)"),Object(a.b)(e,"type"),Object(a.b)(t,"eventHandler");var r=n.arrayUpdatedHandlers.get(e);return Object(a.c)(r)||(r=[]),n.arrayUpdatedHandlers.set(e,r.concat(t)),{unsubscribe:function(){var r=n.arrayUpdatedHandlers.get(e);Object(a.c)(r)&&n.arrayUpdatedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,Object(a.a)("BeanManager.onArrayUpdate(eventHandler)"),Object(a.b)(t,"eventHandler"),n.allArrayUpdatedHandlers=n.allArrayUpdatedHandlers.concat(t),{unsubscribe:function(){n.allArrayUpdatedHandlers=n.allArrayUpdatedHandlers.filter(function(e){return e!==t})}}}}]),e}();t.a=u,u.LOGGER=c.b.getLogger("BeanManager")},function(e,t,n){var r=n(25),o=n.n(r),c=n(18),u=n(0),s=n(2),d=null,f=function(){function e(t){l(this,e),Object(u.a)("ClassRepository(dolphin)"),Object(u.b)(t,"dolphin"),this.dolphin=t,this.classes=new o.a,this.beanFromDolphin=new o.a,this.beanToDolphin=new o.a,this.classInfos=new o.a,this.beanAddedHandlers=[],this.beanRemovedHandlers=[],this.propertyUpdateHandlers=[],this.arrayUpdateHandlers=[]}return i(e,[{key:"fixType",value:function(e,t){switch(e){case c.c:case c.p:case c.j:case c.n:return parseInt(t);case c.i:case c.g:return parseFloat(t);case c.b:return"true"===String(t).toLowerCase();case c.q:case c.h:return String(t);default:return t}}},{key:"fromDolphin",value:function(e,t,n){if(!Object(u.c)(n))return null;switch(t){case c.f:return e.beanFromDolphin.get(String(n));case c.e:case c.d:case c.l:case c.m:case c.r:return new Date(String(n));default:return this.fixType(t,n)}}},{key:"toDolphin",value:function(e,t,n){if(!Object(u.c)(n))return null;switch(t){case c.f:return e.beanToDolphin.get(n);case c.e:case c.d:case c.l:case c.m:case c.r:return n instanceof Date?n.toISOString():n;default:return this.fixType(t,n)}}},{key:"sendListSplice",value:function(e,t,n,r,o,i){var a=e.dolphin,c=a.findPresentationModelById(t),l=this;if(Object(u.c)(c)){var s=e.classes.get(c.presentationModelType)[n];if(Object(u.c)(s)){var d=[a.attribute("@@@ SOURCE_SYSTEM @@@",null,"client"),a.attribute("source",null,t),a.attribute("attribute",null,n),a.attribute("from",null,r),a.attribute("to",null,o),a.attribute("count",null,i.length)];i.forEach(function(t,n){d.push(a.attribute(n.toString(),null,l.toDolphin(e,s,t)))}),a.presentationModel.apply(a,[null,"@DP:LS@"].concat(d))}}}},{key:"validateList",value:function(t,n,r,o){var i=r[o];Object(u.c)(i)||t.propertyUpdateHandlers.forEach(function(t){try{t(n,r,o,[],void 0)}catch(t){e.LOGGER.error("An exception occurred while calling an onBeanUpdate-handler",t)}})}},{key:"block",value:function(e,t){if(Object(u.c)(d))throw new Error("Trying to create a block while another block exists");d={bean:e,propertyName:t}}},{key:"isBlocked",value:function(e,t){return Object(u.c)(d)&&d.bean===e&&d.propertyName===t}},{key:"unblock",value:function(){d=null}},{key:"notifyBeanChange",value:function(e,t,n){Object(u.a)("ClassRepository.notifyBeanChange(bean, propertyName, newValue)"),Object(u.b)(e,"bean"),Object(u.b)(t,"propertyName");var r=this.beanToDolphin.get(e);if(Object(u.c)(r)){var o=this.dolphin.findPresentationModelById(r);if(Object(u.c)(o)){var i=this.classes.get(o.presentationModelType)[t],a=o.findAttributeByPropertyName(t);if(Object(u.c)(i)&&Object(u.c)(a)){var c=a.getValue();return a.setValue(this.toDolphin(this,i,n)),this.fromDolphin(this,i,c)}}}}},{key:"notifyArrayChange",value:function(e,t,n,r,o){if(Object(u.a)("ClassRepository.notifyArrayChange(bean, propertyName, index, count, removedElements)"),Object(u.b)(e,"bean"),Object(u.b)(t,"propertyName"),Object(u.b)(n,"index"),Object(u.b)(r,"count"),Object(u.b)(o,"removedElements"),!this.isBlocked(e,t)){var i=this.beanToDolphin.get(e),a=e[t];if(Object(u.c)(i)&&Object(u.c)(a)){var c=Array.isArray(o)?o.length:0;this.sendListSplice(this,i,t,n,n+c,a.slice(n,n+r))}}}},{key:"onBeanAdded",value:function(e){Object(u.a)("ClassRepository.onBeanAdded(handler)"),Object(u.b)(e,"handler"),this.beanAddedHandlers.push(e)}},{key:"onBeanRemoved",value:function(e){Object(u.a)("ClassRepository.onBeanRemoved(handler)"),Object(u.b)(e,"handler"),this.beanRemovedHandlers.push(e)}},{key:"onBeanUpdate",value:function(e){Object(u.a)("ClassRepository.onBeanUpdate(handler)"),Object(u.b)(e,"handler"),this.propertyUpdateHandlers.push(e)}},{key:"onArrayUpdate",value:function(e){Object(u.a)("ClassRepository.onArrayUpdate(handler)"),Object(u.b)(e,"handler"),this.arrayUpdateHandlers.push(e)}},{key:"registerClass",value:function(e){if(Object(u.a)("ClassRepository.registerClass(model)"),Object(u.b)(e,"model"),!this.classes.has(e.id)){var t={};e.attributes.filter(function(e){return e.propertyName.search(/^@/)<0}).forEach(function(e){t[e.propertyName]=e.value}),this.classes.set(e.id,t)}}},{key:"unregisterClass",value:function(e){Object(u.a)("ClassRepository.unregisterClass(model)"),Object(u.b)(e,"model"),this.classes.delete(e.id)}},{key:"load",value:function(t){Object(u.a)("ClassRepository.load(model)"),Object(u.b)(t,"model");var n=this,r=this.classes.get(t.presentationModelType),o={};return t.attributes.filter(function(e){return e.propertyName.search(/^@/)<0}).forEach(function(i){o[i.propertyName]=null,i.onValueChange(function(a){if(a.oldValue!==a.newValue){var c=n.fromDolphin(n,r[i.propertyName],a.oldValue),u=n.fromDolphin(n,r[i.propertyName],a.newValue);n.propertyUpdateHandlers.forEach(function(n){try{n(t.presentationModelType,o,i.propertyName,u,c)}catch(t){e.LOGGER.error("An exception occurred while calling an onBeanUpdate-handler",t)}})}})}),this.beanFromDolphin.set(t.id,o),this.beanToDolphin.set(o,t.id),this.classInfos.set(t.id,r),this.beanAddedHandlers.forEach(function(n){try{n(t.presentationModelType,o)}catch(t){e.LOGGER.error("An exception occurred while calling an onBeanAdded-handler",t)}}),o}},{key:"unload",value:function(t){Object(u.a)("ClassRepository.unload(model)"),Object(u.b)(t,"model");var n=this.beanFromDolphin.get(t.id);return this.beanFromDolphin.delete(t.id),this.beanToDolphin.delete(n),this.classInfos.delete(t.id),Object(u.c)(n)&&this.beanRemovedHandlers.forEach(function(r){try{r(t.presentationModelType,n)}catch(t){e.LOGGER.error("An exception occurred while calling an onBeanRemoved-handler",t)}}),n}},{key:"spliceListEntry",value:function(t){Object(u.a)("ClassRepository.spliceListEntry(model)"),Object(u.b)(t,"model");var n=t.findAttributeByPropertyName("source"),r=t.findAttributeByPropertyName("attribute"),o=t.findAttributeByPropertyName("from"),i=t.findAttributeByPropertyName("to"),a=t.findAttributeByPropertyName("count");if(!(Object(u.c)(n)&&Object(u.c)(r)&&Object(u.c)(o)&&Object(u.c)(i)&&Object(u.c)(a)))throw new Error("Invalid list modification update received");var c=this.classInfos.get(n.value),l=this.beanFromDolphin.get(n.value);if(!Object(u.c)(l)||!Object(u.c)(c))throw new Error("Invalid list modification update received. Source bean unknown.");var s=t.presentationModelType;this.validateList(this,s,l,r.value);for(var d=[],f=null,h=0;h<a.value;h++){if(f=t.findAttributeByPropertyName(h.toString()),!Object(u.c)(f))throw new Error("Invalid list modification update received");d.push(this.fromDolphin(this,c[r.value],f.value))}try{this.block(l,r.value),this.arrayUpdateHandlers.forEach(function(t){try{t(s,l,r.value,o.value,i.value-o.value,d)}catch(t){e.LOGGER.error("An exception occurred while calling an onArrayUpdate-handler",t)}})}finally{this.unblock()}}},{key:"mapParamToDolphin",value:function(e){if(!Object(u.c)(e))return e;var t=void 0===e?"undefined":a(e);if("object"===t){if(e instanceof Date)return e.toISOString();var n=this.beanToDolphin.get(e);if(Object(u.c)(n))return n;throw new TypeError("Only managed Dolphin Beans can be used")}if("string"===t||"number"===t||"boolean"===t)return e;throw new TypeError("Only managed Dolphin Beans and primitive types can be used")}},{key:"mapDolphinToBean",value:function(e){return this.fromDolphin(this,c.f,e)}}]),e}();t.a=f,f.LOGGER=s.b.getLogger("ClassRepository")},function(e,t,n){var r=n(41),o=n.n(r),a=n(78),c=n.n(a),u=n(0),s=n(133),d=n(21),f=n(22),h="controllerId",p="errorCode",v=function(){function e(t,n,r){l(this,e),Object(u.a)("ControllerManager(dolphin, classRepository, connector)"),Object(u.b)(t,"dolphin"),Object(u.b)(n,"classRepository"),Object(u.b)(r,"connector"),this.dolphin=t,this.classRepository=n,this.connector=r,this.controllers=new c.a}return i(e,[{key:"createController",value:function(e){return this._createController(e,null)}},{key:"_createController",value:function(e,t){Object(u.a)("ControllerManager.createController(name)"),Object(u.b)(e,"name");var n=this,r=void 0,i=void 0,a=void 0,c=void 0;return new o.a(function(o){n.connector.getHighlanderPM().then(function(u){n.connector.invoke(d.a.createCreateControllerCommand(e,t)).then(function(){r=u.findAttributeByPropertyName(h).getValue(),i=u.findAttributeByPropertyName("model").getValue(),a=n.classRepository.mapDolphinToBean(i),c=new s.a(r,a,n),n.controllers.add(c),o(c)})})})}},{key:"invokeAction",value:function(e,t,n){Object(u.a)("ControllerManager.invokeAction(controllerId, actionName, params)"),Object(u.b)(e,"controllerId"),Object(u.b)(t,"actionName");var r=this;return new o.a(function(o,i){var a=[r.dolphin.attribute(f.b,null,f.c),r.dolphin.attribute(p)],c=r.dolphin.presentationModel.apply(r.dolphin,[null,f.a].concat(a)),l=[];if(Object(u.c)(n))for(var s in n)if(n.hasOwnProperty(s)){var h=r.classRepository.mapParamToDolphin(n[s]);l.push({name:s,value:h})}r.connector.invoke(d.a.createCallActionCommand(e,t,l)).then(function(){c.findAttributeByPropertyName(p).getValue()?i(new Error("Server side ControllerAction "+t+" caused an error. Please see server log for details.")):o(),r.dolphin.deletePresentationModel(c)})})}},{key:"destroyController",value:function(e){Object(u.a)("ControllerManager.destroyController(controller)"),Object(u.b)(e,"controller");var t=this;return new o.a(function(n){t.connector.getHighlanderPM().then(function(r){t.controllers.delete(e),r.findAttributeByPropertyName(h).setValue(e.controllerId),t.connector.invoke(d.a.createDestroyControllerCommand(e.getId())).then(n)})})}},{key:"destroy",value:function(){var e=this.controllers,t=[];return this.controllers=new c.a,e.forEach(function(e){try{t.push(e.destroy())}catch(e){}}),o.a.all(t)}}]),e}();t.a=v},function(e,t,n){var r=n(67),o=n(40);e.exports=n(70)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(o(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){var r=n(5);r(r.P+r.R,"Set",{toJSON:n(71)("Set")})},function(e,t,n){n(72)("Set")},function(e,t,n){n(73)("Set")},function(e,t,n){var r=n(78),o=n.n(r),a=n(0),c=n(2),u=function(){function e(t,n,r){l(this,e),Object(a.a)("ControllerProxy(controllerId, model, manager)"),Object(a.b)(t,"controllerId"),Object(a.b)(n,"model"),Object(a.b)(r,"manager"),this.controllerId=t,this.model=n,this.manager=r,this.destroyed=!1,this.onDestroyedHandlers=new o.a}return i(e,[{key:"getModel",value:function(){return this.model}},{key:"getId",value:function(){return this.controllerId}},{key:"invoke",value:function(e,t){if(Object(a.a)("ControllerProxy.invoke(name, params)"),Object(a.b)(e,"name"),this.destroyed)throw new Error("The controller was already destroyed");return this.manager.invokeAction(this.controllerId,e,t)}},{key:"createController",value:function(e){return this.manager._createController(e,this.getId())}},{key:"destroy",value:function(){var t=this;if(this.destroyed)throw new Error("The controller was already destroyed");return this.destroyed=!0,this.onDestroyedHandlers.forEach(function(n){try{n(t)}catch(t){e.LOGGER.error("An exception occurred while calling an onDestroyed-handler",t)}},this),this.manager.destroyController(this)}},{key:"onDestroyed",value:function(e){Object(a.a)("ControllerProxy.onDestroyed(handler)"),Object(a.b)(e,"handler");var t=this;return this.onDestroyedHandlers.add(e),{unsubscribe:function(){t.onDestroyedHandlers.delete(e)}}}}]),e}();t.a=u,u.LOGGER=c.b.getLogger("ControllerProxy")},function(e,t,n){var r=n(79),o=n.n(r),a=n(41),c=n.n(a),u=n(21),s=n(0),d=function(){function e(t,n,r,o){l(this,e),Object(s.a)("ClientContext(dolphin, beanManager, controllerManager, connector)"),Object(s.b)(t,"dolphin"),Object(s.b)(n,"beanManager"),Object(s.b)(r,"controllerManager"),Object(s.b)(o,"connector"),this.dolphin=t,this.beanManager=n,this._controllerManager=r,this._connector=o,this.connectionPromise=null,this.isConnected=!1}return i(e,[{key:"connect",value:function(){var e=this;return this.connectionPromise=new c.a(function(t){e._connector.connect(),e._connector.invoke(u.a.createCreateContextCommand()).then(function(){e.isConnected=!0,t()})}),this.connectionPromise}},{key:"onConnect",value:function(){return Object(s.c)(this.connectionPromise)?this.isConnected?new c.a(function(e){e()}):this.connectionPromise:this.connect()}},{key:"createController",value:function(e){return Object(s.a)("ClientContext.createController(name)"),Object(s.b)(e,"name"),this._controllerManager.createController(e)}},{key:"disconnect",value:function(){var e=this;return this.dolphin.stopPushListening(),new c.a(function(t){e._controllerManager.destroy().then(function(){e._connector.invoke(u.a.createDestroyContextCommand()),e.dolphin=null,e.beanManager=null,e._controllerManager=null,e._connector=null,t()})})}}]),e}();t.a=d,o()(d.prototype)},function(e,t,n){var r=n(79),o=n.n(r),a=n(0),c=n(136),u=n(23),s=n(137),d=n(2),f=n(1),h="dolphin_platform_intern_dolphinClientId",p=function(){function e(t,n){l(this,e),this.url=t,this.config=n,this.headersInfo=Object(a.c)(n)?n.headersInfo:null;var r=Object(a.c)(n)?n.connection:null;this.maxRetry=Object(a.c)(r)&&Object(a.c)(r.maxRetry)?r.maxRetry:3,this.timeout=Object(a.c)(r)&&Object(a.c)(r.timeout)?r.timeout:5e3,this.failed_attempt=0}return i(e,[{key:"_handleError",value:function(e,t){var n=Object(a.c)(this.config)?this.config.connection:null;(Object(a.c)(n)&&Object(a.c)(n.errorHandlers)?n.errorHandlers:[new s.a]).forEach(function(e){e.onError(t)}),e(t)}},{key:"_send",value:function(t){var n=this;return new Promise(function(r,o){var i=new XMLHttpRequest;if(i.withCredentials=!0,i.onerror=function(t){e.LOGGER.error("HTTP network error",t),n._handleError(o,new c.c("PlatformHttpTransmitter: Network error",t))},i.onreadystatechange=function(){if(4===i.readyState)switch(i.status){case 200:n.failed_attempt=0;var t=i.getResponseHeader(h);if(Object(a.c)(t)?(Object(a.c)(n.clientId)&&n.clientId!==t&&n._handleError(o,new c.b("PlatformHttpTransmitter: ClientId of the response did not match")),n.clientId=t):n._handleError(o,new c.b("PlatformHttpTransmitter: Server did not send a clientId")),e.LOGGER.isLogLevelUseable(d.a.DEBUG)&&!e.LOGGER.isLogLevelUseable(d.a.TRACE))try{var u=JSON.parse(i.responseText);u.length>0&&e.LOGGER.debug("HTTP response with SUCCESS",t,u)}catch(t){e.LOGGER.error("Response could not be parsed to JSON for logging")}e.LOGGER.trace("HTTP response with SUCCESS",t,i.responseText),r(i.responseText);break;case 408:e.LOGGER.error("HTTP request timeout"),n._handleError(o,new c.b("PlatformHttpTransmitter: Session Timeout"));break;default:n.failed_attempt<=n.maxRetry&&(n.failed_attempt=n.failed_attempt+1),e.LOGGER.error("HTTP unsupported status, with HTTP status",i.status),n._handleError(o,new c.d("PlatformHttpTransmitter: HTTP Status != 200 ("+i.status+")"))}},i.open("POST",n.url),Object(a.c)(n.clientId)&&i.setRequestHeader(h,n.clientId),Object(a.c)(n.headersInfo))for(var l in n.headersInfo)n.headersInfo.hasOwnProperty(l)&&i.setRequestHeader(l,n.headersInfo[l]);var s=u.a.encode(t);if(e.LOGGER.isLogLevelUseable(d.a.DEBUG)&&!e.LOGGER.isLogLevelUseable(d.a.TRACE))for(var p=0;p<t.length;p++){var v=t[p];v.id===f.v&&e.LOGGER.debug("send",v,s)}e.LOGGER.trace("send",t,s),n.failed_attempt>n.maxRetry?setTimeout(function(){i.send(s)},n.timeout):i.send(s)})}},{key:"transmit",value:function(e,t){var n=this;this._send(e).then(function(e){if(e.trim().length>0)try{var r=u.a.decode(e);t(r)}catch(r){n.emit("error",new c.a("PlatformHttpTransmitter: Parse error: (Incorrect response = "+e+")")),t([])}else n.emit("error",new c.a("PlatformHttpTransmitter: Empty response")),t([])}).catch(function(e){n.emit("error",e),t([])})}},{key:"signal",value:function(e){var t=this;this._send([e]).catch(function(e){return t.emit("error",e)})}}]),e}();t.a=p,p.LOGGER=d.b.getLogger("PlatformHttpTransmitter"),o()(p.prototype)},function(e,t,n){var r=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Remoting Error",n=arguments[1];l(this,t);var r=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.detail=n||void 0,r}return u(t,Error),t}();t.a=r;var o=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Session Error";return l(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return u(t,Error),t}();t.b=o;var i=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Http Response Error";return l(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return u(t,Error),t}();t.d=i;var a=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Http Network Error";return l(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return u(t,Error),t}();t.c=a},function(e,t,n){var r=n(2),o=function(){function e(){l(this,e)}return i(e,[{key:"onError",value:function(t){e.LOGGER.error(t)}}]),e}();t.a=o,o.LOGGER=r.b.getLogger("RemotingErrorHandler")}])},"object"===(void 0===n?"undefined":a(n))&&"object"===(void 0===t?"undefined":a(t))?t.exports=o():"function"==typeof define&&define.amd?define([],o):"object"===(void 0===n?"undefined":a(n))?n.dolphin=o():r.dolphin=o()},{}],2:[function(e,t,n){"use strict";var r=e("../bower_components/dolphin-platform-js/dist/dolphin-platform.js");angular.module("DolphinPlatform",[]),angular.module("DolphinPlatform").provider("$dolphinConfig",[function(){var e={};this.configure=function(t){e=t},this.$get=function(){return e}}]),angular.module("DolphinPlatform").factory("logger",function(){return r.LoggerFactory.getLogger("DolphinPlatform")}),angular.module("DolphinPlatform").factory("clientContextFactory",function(){return new r.ClientContextFactory}),angular.module("DolphinPlatform").factory("vanillaClientContext",["clientContextFactory","$dolphinConfig",function(e,t){return e.create(t.DOLPHIN_URL,t)}]),angular.module("DolphinPlatform").factory("dolphinBinding",["$rootScope","$timeout","vanillaClientContext","logger",function(e,t,n,r){e.waitingForGlobalDolphinApply=!1,e.applyInAngular=function(){e.waitingForGlobalDolphinApply||(e.waitingForGlobalDolphinApply=!0,t(function(){e.waitingForGlobalDolphinApply=!1,r.debug("Creating Dolphin Platform controller"),e.$apply()},100))};var o={injectArray:function(e,t,n){e.splice.apply(e,[t,0].concat(n))},exists:function(e){return null!=e},deepEqual:function(e,t){if(e===t||!this.exists(e)&&!this.exists(t))return!0;if(this.exists(e)!==this.exists(t))return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0},init:function(e){e.onAdded(o.onBeanAddedHandler),e.onRemoved(o.onBeanRemovedHandler),e.onBeanUpdate(o.onBeanUpdateHandler),e.onArrayUpdate(o.onArrayUpdateHandler),r.debug("Dolphin Platform binding listeners for Angular registered")},watchAttribute:function(t,o){r.debug("Added Angular listener for property "+o+" of bean "+JSON.stringify(t)),e.$watch(function(){return t[o]},function(e,i){r.debug("Value "+o+" of bean "+JSON.stringify(t)+" changed from "+i+" to "+e),n.beanManager.classRepository.notifyBeanChange(t,o,e)})},onBeanAddedHandler:function(t){for(var n in r.debug("Bean "+JSON.stringify(t)+" added"),t)o.watchAttribute(t,n);e.applyInAngular()},onBeanRemovedHandler:function(t){r.debug("Bean "+JSON.stringify(t)+" removed"),e.applyInAngular()},onBeanUpdateHandler:function(t,n,i,a){var c=!0;for(var u in t)u===n&&(c=!1);c&&(r.debug("Value "+n+" was added to bean "+JSON.stringify(t)),o.watchAttribute(t,n)),a!==i?(r.debug("Bean update for property "+n+' with new value "'+i+'"'),t[n]=i,e.applyInAngular()):r.debug("Received bean update for property "+n+" without any change")},onArrayUpdateHandler:function(t,n,i,a,c){var u=t[n],l=u.slice(i,i+a);if(!o.deepEqual(c,l))if(r.debug("Array update for property "+n+" starting at index "+i+" with "+JSON.stringify(c)),void 0===c||c&&0===c.length)u.splice(i,a),e.applyInAngular();else{for(t in o.injectArray(u,i,c),c)for(var s in t)o.watchAttribute(t,s);e.applyInAngular()}}};return r.debug("Dolphin Platform binding created"),o}]),angular.module("DolphinPlatform").factory("clientContext",["vanillaClientContext","dolphinBinding","$window","logger",function(e,t,n,r){var o={createController:function(t,n){return e.createController(n).then(function(e){return r.debug("Creating Dolphin Platform controller "+n),t.$on("$destroy",function(){r.debug("Destroying Dolphin Platform controller "+n),e.destroy()}),t.model=e.model,e})},disconnect:function(){e.disconnect().then(function(){r.debug("Dolphin Platform context disconnected")})},connect:function(){e.connect().then(function(){r.debug("Dolphin Platform context connected")})},onConnect:function(){return e.onConnect().then(function(){r.debug("Dolphin Platform context connected")})}};return t.init(e.beanManager),n.onbeforeunload=o.disconnect,r.debug("Dolphin Platform context created"),o}])},{"../bower_components/dolphin-platform-js/dist/dolphin-platform.js":1}]},{},[2]);
//# sourceMappingURL=dolphin-platform-angular.min.js.map
